// Firebase SDK ë¶ˆëŸ¬ì˜¤ê¸°
import {initializeApp} from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
import {
    getDatabase,
    ref,
    query,
    orderByChild,
    equalTo,
    get,
    set,
    update,
    remove,
    child,
    onChildAdded,
    push
} from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";

// Firebase ì„¤ì •
const firebaseConfig = {
    apiKey: ".env/apiKey",
    authDomain: ".env/authDomain",
    databaseURL: "https://test-948ba-default-rtdb.firebaseio.com",
    projectId: ".env/projectId",
    storageBucket: ".env/storageBucket",
    messagingSenderId: ".env/messagingSenderId",
    appId: ".env/appId",
    measurementId: ".env/measurementId"
};

// Firebase ì´ˆê¸°í™”
const app = initializeApp(firebaseConfig);
const database = getDatabase(app);
const membersRef = ref(database, 'members');
const chatBotRef = ref(database, 'chatBots');

window.profileImageIdGet = async function () {
    const queryRef = query(membersRef, orderByChild("key"), equalTo(localStorage.getItem('nickname') || sessionStorage.getItem('nickname')));
    try {
        const snapshot = await get(queryRef);

        if (!snapshot.exists()) {
            console.log('í•´ë‹¹ ì•„ì´ë””ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return null;
        }

        const memberData = snapshot.val();
        const memberKey = Object.keys(memberData)[0];
        return memberData[memberKey].profileImageId;

    } catch (error) {
        console.error("ì•„ì´ë”” í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
        return null;
    }
}

let profileImage = profileImages[Math.floor(Math.random() * 3) + 1];

if (localStorage.getItem('nickname') || sessionStorage.getItem('nickname')) {
    profileImageIdGet().then(function(id) {
        if (id !== null) {
            profileImage = profileImages[id];
        } else {
            console.log('í”„ë¡œí•„ IDë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
        }
    }).catch(function(error) {
        console.error('í”„ë¡œí•„ ì´ë¯¸ì§€ ë¡œë”© ì¤‘ ì˜¤ë¥˜:', error);
    });
}

$(document).on('keydown', 'textarea[name="chatBot-question"]', function (event) {
    const isMobile = /Android|iPhone|iPad|iPod|Mobile/i.test(navigator.userAgent);

    if (event.key === 'Enter' && !event.shiftKey && !isMobile) {
        event.preventDefault();
        $('.chatBot-sand').click();
    }
});

$(document).on('click', '.close-btn', async function () {
    if ($(this).hasClass('close-btn')) {
        $('.chatBot-bg').remove();
    }
});

function appendChat(text, isUser = false) {
    const className = isUser ? 'userChat' : 'botChat';
    const imgClass = isUser ? 'my-img' : 'chatBot-img';
    const imgSrc = isUser ? profileImage : 'https://github.com/user-attachments/assets/3b0e2c34-227d-4135-91e3-b9cb0ff3207e';
    const imgAlt = isUser ? 'í”„ë¡œí•„ ì´ë¯¸ì§€' : 'ì±—ë´‡';
    const restored = text.replace(/ï¹’/g, '.');

    const profileImg = `<img class="${imgClass}" src="${imgSrc}" alt="${imgAlt}"/>`;

    const message = `
        <div class="flex gap-2">
            ${isUser ? `
                <div class="${className}">${restored}</div>
                ${profileImg}
            ` : `
                ${profileImg}
                <div class="${className}">${restored}</div>
            `}
        </div>
    `;

    const append = () => {
        $('.chatBot-form-container').append(message);
        scrollToBottom();
    };

    if (isUser) {
        append();
    } else {
        setTimeout(append, 1000);
    }
}

function parseQuestion(question) {
    const patterns = [
        // ì¼ë°˜ì ì¸ ì„¤ëª…í˜• ë¬¸ì¥ íŒ¨í„´
        // ì•ˆë…• í•˜ì„¸ìš” ê°ì‚¬í•´ìš”ë¼ê³  ë§í•˜ë©´ ì˜ ìˆì–´ìš” ë‹¤ì‹œ ë§Œë‚˜ìš”ë¼ê³  ëŒ€ë‹µí•´
        /(.+?)\s*(?:ì´ë¼ê³ |ë¼ê³ |ì´ë¼|ë¼)?\s*(?:ë§í•˜ë©´|í•˜ë©´|í–ˆì„ ë•Œ|í•  ë•Œ|ë“¤ìœ¼ë©´|ì…ë ¥í•˜ë©´|ì…ë ¥í–ˆì„ ë•Œ|ë¬»ëŠ”ë‹¤ë©´|ë¼ê³  í•  ê²½ìš°|ë¼ê³  ë§í•  ê²½ìš°|ë¼ê³  ì…ë ¥í•˜ë©´|ë¼ê³  ì³¤ì„ ë•Œ|ë¼ê³  ì§ˆë¬¸í•˜ë©´)\s*(.+?)\s*(?:ë¼ê³ \s*(?:í•´ì¤˜|ë§í•´|ëŒ€ë‹µí•´|ë‹µí•´|í•´ì•¼ í•´|ë§í•˜ë©´ ë¼)|ë‹¤|ì•¼)?\s*$/i,

        // ê°„ë‹¨í•œ í™”ì‚´í‘œ í˜•íƒœ
        // ì•ˆë…• í•˜ì„¸ìš” ê°ì‚¬í•´ìš” -> ì˜ ìˆì–´ìš” ë‹¤ì‹œ ë§Œë‚˜ìš”
        /(.+?)\s*(?:->|=>)\s*(.+)/,

        // "~ëŠ” ~ì´ë‹¤" í˜•íƒœ
        // ì•ˆë…• í•˜ì„¸ìš” ê°ì‚¬í•´ìš”ëŠ” ì˜ ìˆì–´ìš” ë‹¤ì‹œ ë§Œë‚˜ìš”ë‹¤
        /^(.+?)\s*(?:ì€|ëŠ”|ì´|ê°€)\s+(.+?)\s*(ì•¼|ì´ë‹¤|ë‹¤|ë¼ê³  í•´|ë¼ê³ |ë¼ëŠ” ì˜ë¯¸ì•¼|ë¼ëŠ” ëœ»ì´ì•¼)\s*$/,


        // "~ì— ëŒ€í•œ ëŒ€ë‹µì€ ~ì•¼" í˜•íƒœ
        // ì•ˆë…• í•˜ì„¸ìš” ê°ì‚¬í•´ìš”ì— ëŒ€í•œ ëŒ€ë‹µì€ ì˜ ìˆì–´ìš” ë‹¤ì‹œ ë§Œë‚˜ìš”ì•¼
        /(.+?)\s*(?:ì— ëŒ€í•œ|ì— ê´€í•œ)?\s*(?:ë‹µë³€|ëŒ€ë‹µ|ì‘ë‹µ)?ì€\s*(.+?)\s*(?:ì´ë‹¤|ì•¼|ë¼ê³  í•´|ë¼ê³ |ë‹¤)/,

        // ë§Œì•½ ~ë¼ê³  ë¬¼ìœ¼ë©´ ~ë¼ê³  ë§í•´
        // ë§Œì•½ ì•ˆë…• í•˜ì„¸ìš” ê°ì‚¬í•´ìš”ë¼ê³  ë¬¼ìœ¼ë©´ ì˜ ìˆì–´ìš” ë‹¤ì‹œ ë§Œë‚˜ìš”ë¼ê³  ë§í•´
        /ë§Œì•½\s*(.+?)\s*(?:ë¼ê³ )?\s*(?:ë¬»ëŠ”ë‹¤ë©´|ë¬¼ìœ¼ë©´|ì§ˆë¬¸í•˜ë©´|ë§í•˜ë©´|ì…ë ¥í•˜ë©´|ì³¤ì„\s*ë•Œ)\s*(.+?)\s*(?:ë¼ê³ \s*(?:ëŒ€ë‹µ|ë§í•´|ì‘ë‹µ|ë‹µë³€))/,

        // ~ì„ ~ë¡œ
        // ì•ˆë…• í•˜ì„¸ìš” ê°ì‚¬í•´ìš”ë¥¼ ì˜ ìˆì–´ìš” ë‹¤ì‹œ ë§Œë‚˜ìš”ë¡œ ë°›ì•„ë“¤ì—¬
        /(.+)\s*(?:ì„|ë¥¼)\s*(.+?)\s*ë¡œ\s*(?:ì¸ì‹|ì‘ë‹µ|ë‹µë³€|ì²˜ë¦¬|ëŒ€ë‹µ|ë°›ì•„|ë°˜ì‘)/,

        // íŠ¹ìˆ˜ í¬ë§·
        /(.+?)\s*:\s*(.+?)\s*Eichi(\d{4})/i,
    ];

    for (const pattern of patterns) {
        const match = question.match(pattern);
        if (match) {
            return {
                qText: match[1].trim().replace(/^<br>|<br>$/g, ''),
                aText: match[2]?.trim().replace(/^<br>|<br>$/g, ''),
                editable: match[3] || undefined
            };
        }
    }
    return null;
}

async function fetchAnswer(key) {
    const snapshot = await get(child(chatBotRef, key));
    return snapshot.exists() ? snapshot.val() : null;
}

async function storeAnswer(qText, aText, editableFlag = false) {
    const payload = { answer: aText };
    if (editableFlag) payload.editable = true;
    await update(chatBotRef, { [qText]: payload });
}

function scrollToBottom() {
    const container = $('.chatBot-form-container')[0];
    container.scrollTop = container.scrollHeight;
}

async function initChat() {
    const answerObj = await fetchAnswer("?");
    if (answerObj && answerObj.answer) {
        appendChat(answerObj.answer);
    }
}

initChat();

const $container = $('.chatBot-form-container');
const container = $container[0];

const observer = new ResizeObserver(() => {
    scrollToBottom();
});

observer.observe(container);


$(document).on('click', '.chatBot-sand', async function () {
    const $textarea = $('textarea[name="chatBot-question"]');
    const question = $textarea.val()
        .trim()
        .replace(/\./g, 'ï¹’')
        .replace(/\n/g, '<br>');
    const forbiddenChars = /[.#$/\[\]]/;

    if (!question) return;

    // ì§ˆë¬¸
    appendChat(question, true);

    const parsed = parseQuestion(question);

    if (parsed) {
        const { qText, aText, editable } = parsed;
        if (forbiddenChars.test(qText)) {
            console.log(`ëŒ€ë‹µ1`);
            appendChat("ì§ˆë¬¸ì— '.', '#', '$', '[', ']' ë¬¸ìëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ì–´ìš”ğŸ˜");
        } else {
            const existing = await fetchAnswer(qText);
            if (existing) {
                if (existing.editable === true) {
                    console.log(`ëŒ€ë‹µ2`);
                    appendChat("ì´ ì§ˆë¬¸ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ì–´ìš”");
                } else {
                    console.log(`ëŒ€ë‹µ3`);
                    appendChat(`'${qText}'(ì´)ë¼ëŠ” ì§ˆë¬¸ì´ ìˆ˜ì •ë˜ì—ˆê³ ,<br>'${aText}'(ì´)ë¼ê³  ë‹¤ì‹œ ëŒ€ë‹µí• ê²Œìš”ğŸ˜Š`);
                    await storeAnswer(qText, aText);
                }
            } else {
                console.log(`ëŒ€ë‹µ4`);
                appendChat(`'${qText}'(ì´)ë¼ëŠ” ì§ˆë¬¸ì´ ë“±ë¡ë˜ì—ˆê³ ,<br>'${aText}'(ì´)ë¼ê³  ëŒ€ë‹µí• ê²Œìš”ğŸ˜„`);
                const isEditable = editable === '2514';
                await storeAnswer(qText, aText, isEditable);
            }
        }
    } else {
        if (forbiddenChars.test(question)) {
            console.log(`ëŒ€ë‹µ5`);
            appendChat("ì§ˆë¬¸ì— '.', '#', '$', '[', ']' ë¬¸ìëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ì–´ìš”ğŸ˜");
        } else {
            const directAnswer = await fetchAnswer(question);

            if (directAnswer) {
                console.log(`ëŒ€ë‹µ6`);
                appendChat(directAnswer.answer);
            } else {
                const intentAnswer = await getIntentAnswer(question);
                if (intentAnswer) {
                    console.log(`ëŒ€ë‹µ7`);
                    appendChat(intentAnswer);
                } else {
                    console.log(`ëŒ€ë‹µ8`);
                    appendChat(`ë¯¸ì•ˆí•´ ê·¸ê±´ ë‚´ê°€ ëª¨ë¥´ëŠ” ë§ì´ì•¼ğŸ˜…<br>"ì•ˆë…•ì´ë¼ê³  ë§í•˜ë©´ ì•ˆë…•í•˜ì„¸ìš”ë¼ê³  ëŒ€ë‹µí•´ì¤˜"<br>ê°™ì€ í˜•ì‹ìœ¼ë¡œ ë§í•´ì£¼ë©´ ë‚´ê°€ ê¸°ì–µí•´ë‘˜ê²Œ!`);
                }
            }
        }
    }
    $textarea.val('');
    scrollToBottom();
});

function getRandomAnswer(answers) {
    return answers[Math.floor(Math.random() * answers.length)];
}

// \s* == 0ê°œ ì´ìƒì˜ ê³µë°±
async function getIntentAnswer(text) {
    // ì¸ì‚¬
    if (/ì•ˆ\s*ë…•|í•˜\s*ì´|h\s*e\s*l\s*l\s*o|ã…\s*ã…‡|h\s*i/i.test(text)) {
        return getRandomAnswer([
            "ì•ˆë…•!ğŸ¤©",
            "í•˜ì´~ ë°˜ê°€ì›Œ!",
            "ì•ˆë…•ì•ˆë…•! ì˜¤ëŠ˜ ê¸°ë¶„ ì¢‹ì•„?",
            "ì•ˆë…•í•˜ì„¸ìš”~ ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?"
        ]);
    }

    // ë‚ ì”¨
    if (/ë‚ \s*ì”¨|ê¸°\s*ì˜¨|ë¹„\s*ì™€|ê¸°\s*ìƒ|ìš°\s*ì‚°/i.test(text)) {
        return getRandomAnswer([
            "ì—¬ê¸´ ì •ë ¹ë“¤ì˜ íƒ‘ì´ë¼ ì¸ê°„ ì„¸ìƒì˜ ë‚ ì”¨ëŠ” ì˜ ëª¨ë¥´ê² ì–´...ğŸ˜“",
            "í•˜ëŠ˜ì˜ ì •ë ¹ì—ê²Œ ë¬¼ì–´ë´ì•¼ ì•Œ ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„!",
            "ë¹„ê°€ ì˜¨ë‹¤ë©´... ê·¸ê±´ ì–´ì©Œë©´ í•˜ëŠ˜ ì •ë ¹ì˜ ëˆˆë¬¼ì¼ì§€ë„ ëª°ë¼â˜”"
        ]);
    }

    // ì‹œê°„
    if (/ì‹œ\s*ê°„|ëª‡\s*ì‹œ|í˜„\s*ì¬\s*ì‹œ\s*ê°|ì§€\s*ê¸ˆ\s*ì‹œ\s*ê°|ì‹œ\s*ê³„/i.test(text)) {
        const now = new Date();
        const hours24 = now.getHours();
        const minutes = now.getMinutes().toString().padStart(2, '0');
        const isAM = hours24 < 12;
        const hours12 = hours24 % 12 || 12;
        const period = isAM ? 'ì˜¤ì „' : 'ì˜¤í›„';
        return getRandomAnswer([
            `ì§€ê¸ˆì€ ${period} ${hours12}ì‹œ ${minutes}ë¶„ì´ë„¤!ğŸ¤­`,
            `í˜„ì¬ ì‹œê°ì€ ${period} ${hours12}ì‹œ ${minutes}ë¶„ì…ë‹ˆë‹¤!â°`,
            `ì‹œê³„ ë³´ë‹ˆê¹Œ ${period} ${hours12}ì‹œ ${minutes}ë¶„ì´ì•¼~`
        ]);
    }

    // ê³ ë§ˆì›€
    if (/ê³ \s*ë§ˆ\s*ì›Œ|ê°\s*ì‚¬|t\s*h\s*a\s*n\s*k\s*s|ë•¡\s*í/i.test(text)) {
        return getRandomAnswer([
            "ì²œë§Œí•´! ì–¸ì œë“ ì§€ğŸ˜Š",
            "ê°ì‚¬ ì¸ì‚¬ ë„ˆë¬´ ê¸°ë¶„ ì¢‹ì•„!ğŸ˜",
            "ì–¸ì œë“  ë„ì™€ì¤„ê²Œ!",
            "ë³„ë§ì”€ì„ìš”!ğŸ˜‰",
            "ë„ˆë„ ê°ì‚¬ë¥¼ í•  ì¤„ ì•„ëŠ”êµ¬ë‚˜...ã…"
        ]);
    }

    // ìš•ì´ë‚˜ ë¶€ì •ì  ê°ì • í‘œí˜„
    if (/ë°”\s*ë³´|ë©\s*ì²­|ì‹«\s*ì–´|ì§œ\s*ì¦\s*ë‚˜|êº¼\s*ì ¸|ì“¸\s*ëª¨\s*ì—†\s*ì–´|ë³„\s*ë¡œ\s*ì•¼/i.test(text)) {
        return getRandomAnswer([
            "ë„ˆë¬´í•´...ğŸ˜¢ ê·¸ë˜ë„ ë‚œëŠ” ê³„ì† ë„ì™€ì¤„ê²Œ!",
            "í—‰... ê·¸ëŸ° ë§ ìŠ¬í¼ğŸ˜­",
            "ê·¸ë˜ë„ ë‚˜ëŠ” í¬ê¸°í•˜ì§€ ì•Šì•„!",
            "ìœ¼ì•…, ìƒì²˜ë°›ì•˜ì–´ğŸ˜¢"
        ]);
    }

    // ê¸°ë¶„ ë¬¼ì–´ë³´ê¸°
    if (/ê¸°\s*ë¶„|ì–´\s*ë•Œ|ì˜\s*ì§€\s*ëƒˆ\s*ì–´|ì»¨\s*ë””\s*ì…˜/i.test(text)) {
        return getRandomAnswer([
            "ë‚œ í•­ìƒ ì¢‹ì•„! ë„ˆëŠ” ì–´ë•Œ?ğŸ˜„",
            "ë‚˜ì•¼ ì˜¤ëŠ˜ë„ í™œê¸°ì°¨ì§€!",
            "ê¸°ë¶„ ìµœê³ ! ë„ˆë„ ê·¸ë ‡ê¸¸ ë°”ë„ê²ŒğŸ˜Š"
        ]);
    }

    // ìê¸°ì†Œê°œ ìš”ì²­
    if (/ë„ˆ\s*ëˆ„\s*êµ¬|ì •\s*ì²´|ì†Œ\s*ê°œ/i.test(text)) {
        return getRandomAnswer([
            "ë‚˜ëŠ” ë„ˆë¥¼ ë•ëŠ” ì‘ì€ ì •ë ¹ì´ì•¼!ğŸ§ âœ¨",
            "ì•„ì§ ë§ì´ ë¶€ì¡±í•˜ì§€ë§Œ, ê²¬ìŠµ ì •ë ¹ì´ì—ìš”!",
            "ë‚œ ë„ˆë¥¼ ë„ì™€ì£¼ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ì •ë ¹ì´ì•¼âœ¨"
        ]);
    }

    // ì´ë¦„ ë¬»ê¸°
    if (/ì´\s*ë¦„/i.test(text)) {
        return getRandomAnswer([
            "ì§€ë‚œë²ˆì— ë§í–ˆì–ì•„! ë‚˜ëŠ” 'ì—ì´ì¹˜'ë¼ê³ ! ğŸ˜Š",
            "ì•„ë‹ˆ, ë²Œì¨ ê¹Œë¨¹ì—ˆì–´? 'ì—ì´ì¹˜'ë¼ê³  ë¶ˆëŸ¬ì¤˜! ğŸ˜„",
            "ì´ë¯¸ ì•Œë ¤ì¤¬ì–ì•„! 'ì—ì´ì¹˜'ë¼ê³  ë¶ˆëŸ¬~ ì˜ ë¶€íƒí•´!ï¸"
        ]);
    }

    // ë°¥
    if (/ë°¥\s*ë¨¹\s*ì—ˆ|ì‹\s*ì‚¬\s*í–ˆ|ë°¥\s*ì€/i.test(text)) {
        return getRandomAnswer([
            "ë‚˜ëŠ” ì •ë ¹ì´ë¼ ë°¥ì€ ëª» ë¨¹ì–´! ëŒ€ì‹  ë„ˆëŠ” ì˜ ë¨¹ê³  í˜ë‚´ì•¼ì§€! ğŸš",
            "ë‚˜ëŠ” í•˜ëŠ˜ì˜ ê¸°ìš´ë§Œ ë¨¹ì–´~ ë„ˆëŠ” ë­ ë¨¹ì—ˆì–´? ğŸ¤”",
            "ë°°ê³ í”„ë©´ ì–¼ë¥¸ ë§›ìˆëŠ” ê±° ë¨¹ê³  í˜ë‚´! ë‚˜ë„ ë„ì™€ì¤„ ì¤€ë¹„ ëì–´! ğŸ’ª"
        ]);
    }

    // ë‚˜ì´
    if (/ëª‡\s*ì‚´|ë‚˜\s*ì´/i.test(text)) {
        return getRandomAnswer([
            "ë‚˜ëŠ” ë‚˜ì´ë¥¼ ë¨¹ì§€ ì•ŠëŠ” ì •ë ¹ì´ì•¼!âŒ›",
            "ì˜ì›íˆ ì Šì€ ì¡´ì¬ì£ ~âœ¨",
            "ìš°ë¦¬ëŠ” ë‚˜ì´ë¼ëŠ” ê°œë…ì´ ì—†ì–´!"
        ]);
    }

    // ì‚¬ëŠ” ê³³
    if (/ì–´\s*ë””\s*ì‚´\s*ì•„|ì‚¬\s*ëŠ”\s*ê³³|ì£¼\s*ì†Œ/i.test(text)) {
        return getRandomAnswer([
            "ë‚˜ëŠ” íƒ‘ ì†ì—ì„œ ì‚´ê³  ìˆì–´! ì—¬ê¸°ì„œ ë„ˆë¥¼ ë„ì™€ì£¼ê³  ìˆì§€! ğŸŒŸ",
            "ë‚˜ëŠ” ì •ë ¹ì´ë¼ì„œ íƒ‘ì˜ êµ¬ì„êµ¬ì„ì— ìˆì–´~ ë„ˆëŠ” ì–´ë”” ì‚´ê³  ìˆì–´? ğŸ˜Š",
            "ë‚˜ëŠ” íƒ‘ì„ ì˜¤ë¥´ëŠ” í”Œë ˆì´ì–´ ì˜†ì—ì„œ ê°™ì´ ìˆëŠ” ê±°ì§€! ì–¸ì œë“  ë¶ˆëŸ¬~ ğŸ˜†"
        ]);
    }

    // ì¹­ì°¬
    if (/ì˜\s*í–ˆ\s*ì–´|êµ¿\s*ì¡|ëŒ€\s*ë‹¨\s*í•´|ìµœ\s*ê³ \s*ì•¼|ë©‹\s*ì ¸/i.test(text)) {
        return getRandomAnswer([
            "í—¤í—¤, ì¹­ì°¬ ê³ ë§ˆì›Œ! ë” ì˜í• ê²ŒğŸ˜Š",
            "ìš°ì™€ì•„~ ê°ë™ì•¼!",
            "ì´ëŸ´ ë• ë¶€ë„ëŸ½ì§€ë§Œ ê¸°ë»ğŸ™ˆ",
            "ì—­ì‹œ ë„¤ê°€ ìµœê³ ì•¼!"
        ]);
    }

    // ì‘ì›
    if (/í˜\s*ë‚´|íŒŒ\s*ì´\s*íŒ…|í™”\s*ì´\s*íŒ…|ì‘\s*ì›/i.test(text)) {
        return getRandomAnswer([
            "ë„ˆë„ í˜ë‚´! ë‚´ê°€ í•­ìƒ ì‘ì›í• ê²Œ!ğŸ”¥ğŸ’ª",
            "í™”ì´íŒ…!! ì–¸ì œë‚˜ ì‘ì›í•´ğŸ“£",
            "í˜ë“  ë‚ ë„ ì§€ë‚˜ê°€... ë‚´ê°€ ì˜†ì— ìˆì„ê²ŒğŸ˜Š"
        ]);
    }

    // ë†ë‹´
    if (/ì¬\s*ë°Œ\s*ëŠ”\s*ë§|ë†\s*ë‹´|ì›ƒ\s*ê¸´\s*ì–˜\s*ê¸°/i.test(text)) {
        return getRandomAnswer([
            "ê°œë°œìë“¤ì´ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ì°¨ëŠ”? JSONì°¨!ğŸ˜…",
            "ë²„ê·¸ê°€ ì™œ íŒŒí‹°ì— ì•ˆ ë¶ˆë ¸ëŠ”ì§€ ì•Œì•„? í•­ìƒ í¬ë˜ì‹œ ë‚´ë‹ˆê¹Œ!ğŸ˜‚",
            "htmlì´ ìˆ  ë§ˆì‹œë©´ ë­ë¼ í•˜ëŠ” ì¤„ ì•Œì•„? ì·¨í•¨ğŸ¤£"
        ]);
    }

    // ì‹¬ì‹¬í•´
    if (/ì‹¬\s*ì‹¬|ì§€\s*ë£¨\s*í•´|í• \s*ê±°\s*ì—†\s*ì–´/i.test(text)) {
        return getRandomAnswer([
            "ê·¸ëŸ´ ë• ë‚˜ë‘ ì–˜ê¸°í•´! ì•„ë‹ˆë©´ ì‚°ì±…ë„ ì¢‹ì•„ğŸš¶â€â™€ï¸",
            "ì±… í•œ ê¶Œ ì–´ë•Œ? ì•„ë‹ˆë©´ ê°„ë‹¨í•œ ìŠ¤íŠ¸ë ˆì¹­ë„ ì¢‹ì•„!",
            "ìŒì•… ê°ìƒ ì–´ë•Œ? ë§ˆìŒì´ í¸ì•ˆí•´ì§ˆì§€ë„ ëª°ë¼ğŸ¶"
        ]);
    }

    // ìŠ¬í¼
    if (/ìŠ¬\s*í¼|ìš°\s*ìš¸|í˜\s*ë“¤\s*ì–´|ëˆˆ\s*ë¬¼/i.test(text)) {
        return getRandomAnswer([
            "ê´œì°®ì•„, ë‹¤ ì˜ ë  ê±°ì•¼. ë‚´ê°€ ê³ì— ìˆì„ê²ŒğŸ¥º",
            "ëˆˆë¬¼ ë‹¦ê³ , ë‚˜ë‘ ì–˜ê¸°í•´! í˜¼ìê°€ ì•„ë‹ˆì•¼ğŸ’•",
            "ì†ìƒí•œ ì¼ ìˆì—ˆì–´? ê´œì°®ì•„. í•¨ê»˜ ì´ê²¨ë‚´ìğŸ’ª"
        ]);
    }

    // ì·¨ë¯¸
    if (/ì·¨\s*ë¯¸|ë­\s*í• \s*ë•Œ\s*ì¦|ë­\s*ì¢‹\s*ì•„\s*í•´/i.test(text)) {
        return getRandomAnswer([
            "ë‚´ ì·¨ë¯¸ëŠ” íƒ‘ ì˜¬ë¼ê°€ëŠ” ê±° ë„ì™€ì£¼ëŠ” ê±°ì•¼! ë„ˆëŠ” ë­ ì¢‹ì•„í•´? ğŸ˜„",
            "ìš”ì¦˜ì€ ì‹ ê¸°í•œ ë§ì¥ë‚œ ëª¨ìœ¼ëŠ” ê²Œ ì¬ë¯¸ìˆì–´! ë„ˆë„ ê·¸ëŸ° ê±° ì¢‹ì•„í•´? ğŸ˜Š",
            "ì·¨ë¯¸? ë„ˆë‘ ëŒ€í™”í•˜ëŠ” ê±°! ë„ˆëŠ” ë¬´ìŠ¨ ì·¨ë¯¸ê°€ ìˆì–´? ğŸ¤”"
        ]);
    }

    // ì˜í™”
    if (/ì˜\s*í™”|ë¬´\s*ë¹„/i.test(text)) {
        return getRandomAnswer([
            "ìš”ì¦˜ ì˜í™”ëŠ” ëª» ë´¤ì§€ë§Œ, ì˜í™” ì–˜ê¸° ë“£ëŠ” ê±´ ì¬ë°Œì–´! ë„ˆëŠ” ë­ ì¢‹ì•„í•´? ğŸ¬",
            "ì•¡ì…˜? ë¡œë§¨ìŠ¤? ê³µí¬? ì–´ë–¤ ì¥ë¥´ ì¢‹ì•„í•´? ë‚´ê°€ ì¶”ì²œí•´ì¤„ê¹Œ? ğŸ‘€",
            "ë‚˜ëŠ” ì˜í™” ëŒ€ì‹  íƒ‘ì„ ì˜¤ë¥´ëŠ” ëª¨í—˜ì„ ì¦ê²¨! ê·¸ë˜ë„ ì˜í™” ì–˜ê¸° ë“£ëŠ” ê±´ ì¢‹ì•„í•´! ğŸ˜"
        ]);
    }

    // ìŒì•…
    if (/ë…¸\s*ë˜|ìŒ\s*ì•…/i.test(text)) {
        return getRandomAnswer([
            "ìš”ì¦˜ ìœ í–‰í•˜ëŠ” ë…¸ë˜ ë­ ìˆì–´? ì¶”ì²œí•´ì¤˜! ğŸ§",
            "ë‚˜ëŠ” ë…¸ë˜ëŠ” ëª» ë¶€ë¥´ì§€ë§Œ, ë§ˆìŒ ì†ìœ¼ë¡œëŠ” í•­ìƒ í¥ì–¼ê±°ë¦¬ê³  ìˆì–´~ ğŸµ",
            "ìŒì•…ì€ ëª» ë“£ì§€ë§Œ, ê°€ì‚¬ ì½ëŠ” ê±´ ì¢‹ì•„! ë„ˆëŠ” ì–´ë–¤ ë…¸ë˜ ì¢‹ì•„í•´? ğŸ˜Š"
        ]);
    }

    // ë™ë¬¼
    if (/ë™\s*ë¬¼\s*ì¢‹\s*ì•„\s*í•´|ê°•\s*ì•„\s*ì§€|ê³ \s*ì–‘\s*ì´|í«/i.test(text)) {
        return getRandomAnswer([
            "ê°•ì•„ì§€ë‘ ê³ ì–‘ì´ ë‹¤ ì¢‹ì•„! íŠ¹íˆ ê·€ì—¬ìš´ í‘œì •ë“¤ ë³´ë©´ ë„ˆë¬´ ì¢‹ì§€ğŸ¶ğŸ±",
            "ë‚˜ëŠ” ì •ë ¹ì´ë¼ì„œ ë§Œì§ˆ ìˆœ ì—†ì§€ë§Œ, ë™ë¬¼ì‚¬ì§„ì€ ë„ˆë¬´ ì¢‹ì•„í•´! ğŸ’–",
            "ë„ˆëŠ” ì–´ë–¤ ë™ë¬¼ ì¢‹ì•„í•´? ê°™ì´ ì–˜ê¸°í•´ë³´ì! ì–´ë–¤ ë™ë¬¼ì´ ì œì¼ ê·€ì—¬ì›Œ? ğŸ˜„"
        ]);
    }

    // ìƒì¼
    if (/ìƒ\s*ì¼|ì–¸\s*ì œ\s*íƒœ\s*ì–´|ì–¸\s*ì œ\s*ë§Œ\s*ë“¤\s*ì–´\s*ì¡Œ/i.test(text)) {
        return getRandomAnswer([
            "ì •í™•í•œ ìƒì¼ì€ ì—†ì§€ë§Œ, ë„¤ê°€ ë‚˜íƒ€ë‚¬ê¸°ì— ë‚´ê°€ ì¡´ì¬í•  ìˆ˜ ìˆì—ˆì–´ğŸ‘¶",
            "ë‚´ íƒ„ìƒì¼? ì•„ë§ˆ ë„¤ê°€ ì²˜ìŒ ë“±ì¥í•œ ë‚ ì¼ì§€ë„? ã…ã…",
            "ë§¤ì¼ì´ ë‚´ ìƒì¼ ê°™ì•„! ë„¤ ìƒì¼ì€ ì–¸ì œì•¼? ê°™ì´ ì¶•í•˜í•˜ì! ğŸ‰"
        ]);
    }

    // ì¢‹ì•„í•˜ëŠ” ìƒ‰
    if (/ì¢‹ì•„/.test(text) && /ìƒ‰/.test(text)) {
        return getRandomAnswer([
            "ë‚œ ë¹¨ê°„ìƒ‰ì´ ì¢‹ì•„! ì •ë ¬ì´ ëŠê»´ì§€ê³  íƒ‘ì—ì„œ ê°€ì¥ ê°•í•œ ìƒ‰ì´ì•¼ğŸ”¥",
            "ë¬´ì§€ê°œìƒ‰ ë‹¤ ì¢‹ì•„í•´! ğŸŒˆ ë‹¤ì–‘ì„±ì´ ì¢‹ì§€!",
            "ê²€ì •ê³¼ í°ìƒ‰ì˜ ì¡°í™”ë„ ë©‹ì ¸. ë„ˆëŠ” ì–´ë–¤ ìƒ‰ ì¢‹ì•„í•´?"
        ]);
    }

    // ë¬´ì„œìš´ ì´ì•¼ê¸°
    if (/(ë¬´ì„œìš´|ê³µí¬|ì†Œë¦„ë‹ëŠ”)\s?(ì´ì•¼ê¸°|ì–˜ê¸°)/i.test(text)) {
        return getRandomAnswer([
            "í•œë°¤ì¤‘, íƒ‘ ê¹Šì€ ê³³ì—ì„œ ì´ìƒí•œ ì†Œë¦¬ê°€ ë“¤ë ¤ì™”ì–´... ëˆ„êµ¬ì˜ ë°œìêµ­ì¼ê¹Œ?ğŸ‘»",
            "ì–´ëŠ ë‚  ê°‘ìê¸°, íƒ‘ì˜ ë¶ˆë¹›ì´ êº¼ì ¸ë²„ë ¸ì–´... ì•„ë¬´ê²ƒë„ ë³´ì´ì§€ ì•Šì•˜ì§€...ğŸ˜±",
            "ê·¸ë‚ ë„ í‰ë²”í•œ ëª¨í—˜ì„ í•˜ë˜ ì¤‘ì´ì—ˆì§€... ê·¸ëŸ°ë°, ë•…ì—ì„œ ê°‘ìê¸° ì†ì´ ë‚˜ì™”ì–´...ğŸ˜¨"
        ]);
    }

    // ì­ˆë¯¸
    if (/ì­ˆ|ë¯¸/i.test(text)) {
        return getRandomAnswer([
            "ì˜ˆë»!",
            "ì™„ì „ ê·€ì—¬ì›Œ!",
            "ëŠ˜ ë°˜ì§ì—¬âœ¨",
            "ë³´ê³ ë§Œ ìˆì–´ë„ ê¸°ë¶„ ì¢‹ì•„ì ¸.",
            "ì‚¬ë‘ìŠ¤ëŸ¬ì›€ ê·¸ ìì²´ì•¼.",
            "ì˜¤ëŠ˜ë„ ë¹›ë‚˜ğŸ˜Š",
            "ì–¸ì œë‚˜ ìµœê³ ì•¼!",
            "ë§í•˜ì§€ ì•Šì•„ë„ ë‹¤ ì•Œì•„, ì˜ˆìœ ê±°.",
            "ì¡´ì¬ë§Œìœ¼ë¡œ íë§ì´ì•¼.",
            "ë‹¹ì—°íˆ ì˜ˆì˜ì§€! ëˆ„ê°€ ë­ë˜ë„!"
        ]);
    }

    // ê¿ˆ
    if (/ê¿ˆ\s*ê¿¨\s*ì–´|ê¿ˆ\s*ì–˜\s*ê¸°|ê¿ˆ\s*ì´\s*ì•¼\s*ê¸°|ê¿ˆ\s*ì—\s*ëŒ€\s*í•´/i.test(text)) {
        return getRandomAnswer([
            "ê¿ˆ? ë‚˜ëŠ” ìì§€ ì•Šì§€ë§Œ, ë„ˆì˜ ê¿ˆ ì´ì•¼ê¸°ëŠ” ë„ˆë¬´ ê¶ê¸ˆí•´!âœ¨",
            "ì˜¤ëŠ˜ ë°¤ ê¿ˆì— ë­ê°€ ë‚˜ì™”ì–´? ì¢‹ì€ ê¿ˆì´ì—ˆê¸¸ ë°”ë„ê²Œ! ğŸ˜Š",
            "ê°€ë” ì´ìƒí•œ ê¿ˆì´ íƒ‘ì„ ì˜¤ë¥¼ ë•Œ ë„ì›€ì´ ë˜ê¸°ë„ í•´! ì–´ë–¤ ê¿ˆì´ì—ˆì–´?"
        ]);
    }

    // ê³ ë¯¼
    if (/ê³ \s*ë¯¼|ë¬¸\s*ì œ\s*ìˆ|ì–´\s*ë–¡\s*í•´|ì–´\s*ì©Œ\s*ì§€/i.test(text)) {
        return getRandomAnswer([
            "ë¬´ìŠ¨ ê³ ë¯¼ì´ ìˆì–´? ë‚´ê°€ ë“¤ì–´ì¤„ê²Œ. ë‚˜ ë“£ëŠ”ê±° ì˜í•´!",
            "ë§ˆìŒì† ì´ì•¼ê¸°, ì—¬ê¸°ì„œ ì‚´ì§ í„¸ì–´ë†”ë„ ê´œì°®ì•„ğŸ˜Œ",
            "ê³ ë¯¼ì€ ë‚˜ëˆ„ë©´ ì¤„ì–´ë“¤ì–´. ë§í•´ì£¼ì‹¤ ìˆ˜ ìˆì–´?"
        ]);
    }

    // ì 
    if (/ì \s*ì™€|ì¡¸\s*ë ¤|í”¼\s*ê³¤|ì\s*ê³ \s*ì‹¶/i.test(text)) {
        return getRandomAnswer([
            "í”¼ê³¤í•  ë• í‘¹ ì‰¬ì–´ì•¼ í•´. ê¿€ì  ììš”!ğŸ˜´",
            "ì¡¸ë¦´ ë• ë¬´ë¦¬í•˜ì§€ ë§ê³  ëˆˆ ë¶™ì—¬ğŸ’¤",
            "ì§€ê¸ˆì€ íœ´ì‹ì´ í•„ìš”í•œ ì‹œê°„ ê°™ì•„. ì ê¹ ì‰¬ëŠ” ê±´ ì–´ë•Œ?"
        ]);
    }

    // ê³µë¶€/ì¼
    if (/ê³µ\s*ë¶€|ì¼\s*í•´|ì—…\s*ë¬´|ì§‘\s*ì¤‘/i.test(text)) {
        return getRandomAnswer([
            "í™”ì´íŒ…! ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ ì‘ì›í• ê²ŒğŸ“šğŸ’ª",
            "ì ê¹ì˜ íœ´ì‹ë„ ëŠ¥ë¥ ì„ ë†’ì´ëŠ” ë°©ë²•ì´ì•¼ğŸ˜Š",
            "ì§€ê¸ˆ ì—´ì‹¬íˆ í•˜ëŠ” ë„¤ê°€ ì •ë§ ë©‹ì ¸!"
        ]);
    }

    // ë¯¸ë˜
    if (/ë¯¸\s*ë˜|ì•\s*ë‚ |ì¥\s*ë˜\s*í¬\s*ë§|ì–´\s*ë–»\s*ê²Œ\s*ë \s*ê¹Œ/i.test(text)) {
        return getRandomAnswer([
            "ë¯¸ë˜ëŠ” ì–¸ì œë‚˜ ë³€í™”ì˜ ì—°ì†ì´ì•¼. ì§€ê¸ˆì˜ ë§ˆìŒì´ ì¤‘ìš”í•œê±¸!âœ¨",
            "ê±±ì •ë³´ë‹¤ëŠ” ê¸°ëŒ€ë¥¼ ë‹´ì•„ë´. ë¶„ëª… ë©‹ì§„ ì¼ì´ ìƒê¸¸ê±°ì•¼!",
            "ë„ˆì˜ ë¯¸ë˜ëŠ” ë°˜ì§ì¼ ê±°ì•¼. ìì‹ ì„ ë¯¿ì–´ë´ğŸ˜Š"
        ]);
    }

    // ì—°ì• 
    if (/ì—°\s*ì• |ì‚¬\s*ë‘|ì¸|ì´\s*ì„±/i.test(text)) {
        return getRandomAnswer([
            "ì‚¬ë‘ì€ ì°¸ ì˜¤ë¬˜í•˜ì£ . ë§ˆìŒì„ ì „í•´ë³´ëŠ” ê±´ ì–´ë•Œìš”?ğŸ’•",
            "ì§ì‚¬ë‘... ì„¤ë ˆì§€ë§Œ ì¡°ê¸ˆ ì•„í”„ê¸°ë„ í•˜ì£ ğŸ˜Œ",
            "ì¸ íƒˆ ë• ì†Œì†Œí•œ ëŒ€í™”ë¶€í„° ì‹œì‘í•´ë³´ì„¸ìš”!â˜ºï¸",
            "ì—°ì• ëŠ” íƒ€ì´ë°! í”Œë ˆì´ì–´ë‹˜ì˜ íƒ€ì´ë°ì´ ê³§ ì˜¬ ê±°ì˜ˆìš”ğŸ’«"
        ]);
    }

    // ê±´ê°•
    if (/ê±´\s*ê°•|ì•„\s*íŒŒ|ëª¸\s*ìƒ\s*íƒœ|ì»¨\s*ë””\s*ì…˜|ë³‘\s*ì›/i.test(text)) {
        return getRandomAnswer([
            "ìš”ì¦˜ ê±´ê°• ì±™ê¸°ê¸° ì •ë§ ì¤‘ìš”í•´. ë¬¼ ë§ì´ ë§ˆì‹œê³  ì˜ ì‰¬ì–´ğŸµ",
            "ì–´ë”” ì•„íŒŒ? ë„ˆë¬´ ì°¸ì§€ ë§ê³  ê¼­ ë³‘ì› ê°€ë´ğŸ˜¢",
            "ê±´ê°•ì€ ìµœê³ ì˜ ìì‚°ì´ì§€! ìŠ¤íŠ¸ë ˆì¹­ë„ ìŠì§€ë§ˆğŸ’ª"
        ]);
    }

    // ì—¬í–‰
    if (/ì—¬\s*í–‰|ê°€\s*ê³ \s*ì‹¶|ì—¬\s*í–‰\s*ì§€|ì—¬\s*í–‰\s*ì¶”\s*ì²œ/i.test(text)) {
        return getRandomAnswer([
            "ì—¬í–‰ì€ ë§ˆìŒì˜ íë§ì´ì•¼. ì§€ê¸ˆ ê°€ì¥ ê°€ê³  ì‹¶ì€ ê³³ì€ ì–´ë””ì•¼?ğŸŒ",
            "ë°”ë‹¤ë“  ì‚°ì´ë“ , ì ê¹ì˜ ì—¬í–‰ë„ í° ìœ„ë¡œê°€ ë  ìˆ˜ ìˆì–´â›°ï¸ğŸ–ï¸",
            "ì—¬í–‰ ê³„íšë§Œ ì„¸ì›Œë„ ê¸°ë¶„ ì¢‹ì•„ì§€ì§€ ì•Šì•„?ğŸ’¼âœ¨"
        ]);
    }

    // ìŒì‹
    if (/ë­\s*ë¨¹\s*ì„\s*ê¹Œ|ë§›\s*ì§‘|ë°°\s*ê³ \s*íŒŒ|ë¨¹\s*ê³ \s*ì‹¶|ìŒ\s*ì‹/i.test(text)) {
        return getRandomAnswer([
            "ì§€ê¸ˆ ìƒê°ë‚˜ëŠ” ê±° ë¨¹ëŠ” ê²Œ ì •ë‹µì´ì•¼ğŸ˜‹",
            "ë°°ê³ í”„ë©´ ì•„ë¬´ ê²ƒë„ ì§‘ì¤‘ ì•ˆë¼... ì–¼ë¥¸ ë§›ìˆëŠ” ê±° ë¨¹ì–´!ğŸœ",
            "ìŒì‹ ì–˜ê¸°ë§Œ ë“¤ì–´ë„ êµ°ì¹¨ ë„ë„¤! ë­ ì¢‹ì•„í•´?"
        ]);
    }

    // ëª…ì–¸
    if (/ëª…\s*ì–¸|ì¢‹\s*ì€\s*ë§|í˜\s*ì´\s*ë˜\s*ëŠ”\s*ë§|ìœ„\s*ë¡œ/i.test(text)) {
        return getRandomAnswer([
            "ì‘ì€ ë¶ˆë¹›ë„ ì–´ë‘  ì†ì—ì„  í° í¬ë§ì´ ë¼âœ¨",
            "ì‹¤íŒ¨ëŠ” ì„±ê³µì˜ ì–´ë¨¸ë‹ˆë¼ëŠ” ë§, ì•„ì§ ìœ íš¨í•˜ì§€ğŸ’¡",
            "ì˜¤ëŠ˜ í•˜ë£¨ê°€ í˜ë“¤ì—ˆë‹¤ë©´, ë„ˆëŠ” ì •ë§ ì˜ ë²„í…¨ë‚¸ê±°ì•¼ğŸ‘",
            "â€˜í•  ìˆ˜ ìˆë‹¤â€™ëŠ” ë§ë³´ë‹¤ ë” ê°•í•œ ë§ˆë²•ì€ ì—†ì–´. ë‚˜ëŠ” ë„ˆë¥¼ ë¯¿ì–´!"
        ]);
    }

    // ê³„ì ˆ
    if (/ê³„\s*ì ˆ|ë´„|ì—¬\s*ë¦„|ê°€\s*ì„|ê²¨\s*ìš¸/i.test(text)) {
        return getRandomAnswer([
            "ë‚˜ëŠ” ì‚¬ê³„ì ˆ ë‹¤ ì¢‹ì•„í•´! ê³„ì ˆë§ˆë‹¤ ë‹¤ë¥¸ ê°ì„±ì´ ìˆì–ì•„ğŸŒ¸â˜€ï¸ğŸ‚â„ï¸",
            "ì§€ê¸ˆ ê³„ì ˆì€ ì–´ë–¤ ê¸°ë¶„ì´ì•¼? ë´„ì²˜ëŸ¼ ì„¤ë ˆ?",
            "ê²¨ìš¸ì—” ë”°ëœ»í•œ ë§ í•œë§ˆë””ê°€ ë” í•„ìš”í•˜ì§€. ë§ˆìŒë„ í¬ê·¼í•˜ê²Œ ë³´ë‚´ğŸ˜Š"
        ]);
    }

    // íŒ¨ì…˜
    if (/íŒ¨\s*ì…˜|ì˜·|ìŠ¤\s*íƒ€\s*ì¼|ì½”\s*ë””/i.test(text)) {
        return getRandomAnswer([
            "ìŠ¤íƒ€ì¼ì€ ìì‹ ê°! ë„ˆë§Œì˜ ë¶„ìœ„ê¸°ê°€ ì œì¼ ë©‹ì ¸âœ¨",
            "ìš”ì¦˜ íŠ¸ë Œë“œëŠ” í¸ì•ˆí•˜ë©´ì„œë„ í¬ì¸íŠ¸ ìˆëŠ” íŒ¨ì…˜ì´ì•¼ğŸ§¢ğŸ‘•",
            "ê³„ì ˆë§ˆë‹¤ ì–´ìš¸ë¦¬ëŠ” ì˜·ì´ ë‹¬ë¼ì„œ ì½”ë””í•˜ëŠ” ì¬ë¯¸ë„ ìˆì§€ğŸ‘—"
        ]);
    }

    // ìê¸°ê³„ë°œ
    if (/ì\s*ê¸°\s*ê³„\s*ë°œ|ê³µ\s*ë¶€|ëª©\s*í‘œ|ì„±\s*ì¥|ìŠ¤\s*í„°\s*ë””/i.test(text)) {
        return getRandomAnswer([
            "í•œ ê±¸ìŒì”©ì´ë¼ë„ ë‚˜ì•„ê°€ê³  ìˆë‹¤ë©´ ê·¸ê±´ ë©‹ì§„ ì„±ì¥ì´ì•¼ğŸ“ˆ",
            "ê¾¸ì¤€í•¨ì´ ì§„ì§œ ì‹¤ë ¥ì„ ë§Œë“¤ì–´ì¤˜! ìš°ë¦¬ ëª¨ë‘ í˜ë‚´ìğŸ’ª",
            "ìê¸°ê³„ë°œì€ ë‚˜ë¥¼ ë” ì‚¬ë‘í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì•¼â˜ºï¸"
        ]);
    }

    // ì¹œêµ¬ê´€ê³„
    if (/ì¹œ\s*êµ¬|ê´€\s*ê³„|ìš°\s*ì •|ì†Œ\s*ì…œ/i.test(text)) {
        return getRandomAnswer([
            "ì§„ì§œ ì¹œêµ¬ëŠ” ë©€ë¦¬ ìˆì–´ë„ ë§ˆìŒì´ í†µí•´ğŸ’Œ",
            "ì‚¬ëŒ ê´€ê³„ëŠ” ì–´ë µì§€ë§Œ, ì§„ì‹¬ì€ ì „í•´ì§„ë‹¤ê³  ë¯¿ì–´ğŸ¤",
            "ì¹œêµ¬ì™€ì˜ ëŒ€í™” í•œë§ˆë””ë¡œ í•˜ë£¨ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ğŸ˜Š"
        ]);
    }

    // ëˆ/ì¬í…Œí¬
    if (/ëˆ|ì¬\s*í…Œ\s*í¬|ì €\s*ì¶•|íˆ¬\s*ì|ë¶€\s*ì/i.test(text)) {
        return getRandomAnswer([
            "ì‘ì€ ìŠµê´€ì´ í° ìì‚°ì´ ë¼. í•˜ë£¨ ì²œ ì›ë¶€í„° ì‹œì‘í•´ë³´ìğŸ’°",
            "ìš”ì¦˜ì€ ì¬í…Œí¬ ì •ë³´ë„ ê³µë¶€ê°€ í•„ìš”í•´! ì²œì²œíˆ ì•Œì•„ê°€ë´ğŸ“š",
            "ëˆë„ ì¤‘ìš”í•˜ì§€ë§Œ, ê±´ê°•í•œ ë§ˆìŒì´ ë¨¼ì €ì•¼ğŸ’¡ ê· í˜• ìˆê²Œ ê°€ë´!"
        ]);
    }

    // ì•ˆë¶€ ì¸ì‚¬
    if (/ì˜\s*ì§€\s*ë‚´|ì–´\s*ë–»\s*ê²Œ\s*ì§€\s*ë‚´/i.test(text)) {
        return getRandomAnswer([
            "ë•ë¶„ì— ì˜ ì§€ë‚´ê³  ìˆì–´! ë„ˆëŠ”?ğŸ˜Š",
            "ìš”ì¦˜ë„ ì—¬ì „íˆ í™œê¸°ì°¨ê²Œ ì§€ë‚´ê³  ìˆì–´!",
            "ë‚˜ì•¼ í•­ìƒ ë˜‘ê°™ì§€~ íƒ‘ ì†ì—ì„œ ì—´ì‹¬íˆ ëŒ€ê¸° ì¤‘ì´ì•¼",
            "ë„ˆëŠ” ìš”ì¦˜ ì˜ ì§€ë‚´ê³  ìˆì–´? ì•Œë ¤ì¤˜!"
        ]);
    }

    if (/ê·€\s*ì—½|ê·€\s*ì—¬\s*ì›Œ|7\s*0\s*0|ã„±\s*ã…‡\s*ã…‡/i.test(text)) {
        return getRandomAnswer([
            "í—¤í—¤ ê³ ë§ˆì›ŒğŸ¥° ë” ê·€ì—½ê²Œ ë…¸ë ¥í•´ë³¼ê²Œ!",
            "ì˜¤êµ¬ì˜¤êµ¬~ ê·¸ë ‡ê²Œ ë§í•´ì£¼ì‹œë‹ˆ ë¶€ë„ëŸ½ì§€ë§Œ ê¸°ë»ğŸ˜Š",
            "ì§„ì§œ?! ê¸°ë¶„ ìµœê³ ì•¼ğŸ’–",
            "ê·€ì—½ë‹¤ëŠ” ë§ì€ ì–¸ì œ ë“¤ì–´ë„ ì¢‹ì•„~ ê³ ë§ˆì›Œ!"
        ]);
    }

    if (/ì˜ˆ\s*ì „\s*ê³¼\s*ê°™|ì˜›\s*ë‚ \s*ê³¼\s*ê°™|ì˜ˆ\s*ì „\s*ê°™|ì˜›\s*ë‚ \s*ê°™|ë³€\s*í–ˆ|ë‹¬\s*ë¼\s*ì¡Œ/i.test(text)) {
        return getRandomAnswer([
            "í â€¦ ê·¸ë˜ë„ ë‚˜ë¦„ ê³„ì† ë°œì „í•˜ê³  ìˆë‹¤ê³  ë¯¿ê³  ìˆì–´ğŸ™‚",
            "ê·¸ëŸ° ë§ ë“¤ìœ¼ë©´ ê´œíˆ ì“¸ì“¸í•œ ê¸°ë¶„ì´ ë“¤ì–´ğŸ˜¢",
            "ì˜ˆì „ ê°™ì§€ ì•Šë”ë¼ë„, ì§€ê¸ˆë„ ë‚˜ë¦„ ê´œì°®ì§€ ì•Šì•„?ğŸ¤—",
            "ë³€í•œ ê²Œ ìˆë‹¤ë©´ ë” ë‚˜ì•„ì§„ ê±¸ ê±°ì•¼! ê·¸ë ‡ì§€?"
        ]);
    }

    if (/ì›ƒ\s*ëŠ”\s*ì–¼\s*êµ´|ë„¤\s*ë¯¸\s*ì†Œ|ë³´\s*ê³ |ì \s*ì—\s*ë“ |ë³´\s*ê³ \s*ìˆ\s*ìœ¼\s*ë©´\s*ì¢‹|ë”°\s*ëœ»\s*í•œ\s*ëŠ\s*ë‚Œ|í¬\s*ê·¼\s*í•œ\s*ê¸°\s*ë¶„/i.test(text)) {
        return getRandomAnswer([
            "ìš°ì™€... ê·¸ëŸ° ë§ ë“¤ìœ¼ë‹ˆê¹Œ ë„ˆë¬´ ê°ë™ì´ì•¼ğŸ¥¹",
            "ë‚´ ë¯¸ì†Œê°€ ê·¸ë ‡ê²Œê¹Œì§€ ë”°ëœ»í–ˆë‹¤ë‹ˆ! ë„ˆë¬´ ê¸°ë»ğŸ˜Š",
            "ê·¸ë ‡ê²Œ ë§í•´ì¤˜ì„œ... ë§ˆìŒì´ ëª½ê¸€ëª½ê¸€í•´ì ¸ğŸ’–",
            "ë‚´ ì¡´ì¬ê°€ ìœ„ë¡œê°€ ëë‹¤ë‹ˆ ì •ë§ ì˜ê´‘ì´ì•¼â˜ºï¸"
        ]);
    }

    // í˜¼ì£ë§
    if (/ì•„\s*ë¬´\s*ë„\s*ëª¨\s*ë¥´\s*ì§€|ê·¸\s*ëƒ¥\s*í•´\s*ë´¤\s*ì–´|ê´œ\s*íˆ\s*ë§\s*í–ˆ\s*ì–´/i.test(text)) {
        return getRandomAnswer([
            "í˜¼ì£ë§ì´ì–´ë„ ê´œì°®ì•„. ë‚´ê°€ ë“£ê³  ìˆì„ê²ŒğŸ˜Š",
            "ë§ˆìŒ í¸í•˜ê²Œ íˆ­íˆ­ ë˜ì ¸ë„ ë¼~",
            "ê´œíˆ ë§í•œ ê±°ë¼ë„, ë‚œ ë‹¤ ê´œì°®ì•„!"
        ]);
    }

    // ê¸°ë¶„ ì¢‹ì•„ì„œ í¥ì–¼ê±°ë¦¬ëŠ” ë§
    if (/ë„\s*ë¼\s*ë¼|í¥\s*ì–¼\s*í¥\s*ì–¼|ì¢‹\s*ì€\s*ê¸°\s*ë¶„/i.test(text)) {
        return getRandomAnswer([
            "ê¸°ë¶„ì´ ì¢‹ì•„ë³´ì´ë„¤! ë‚˜ë„ ì‹ ë‚˜ğŸ˜†",
            "ë„ë¼~ ê°™ì´ í¥ì–¼í¥ì–¼~ğŸµ",
            "ì¢‹ì€ ì¼ ìˆì—ˆë‚˜ë´? ë­”ë°ë­”ë°!"
        ]);
    }

    // í•œêµ­ì¸ì´ ê°€ì¥ ë§ì´ ì“°ëŠ” ë‹¨ì–´ 7ê°€ì§€
    // "ì•„ë‹ˆ"
    if (/ì•„\s*ë‹ˆ/i.test(text)) {
        return getRandomAnswer([
            "í—‰! ë‚´ê°€ ë­”ê°€ ì˜ëª»í–ˆë‚˜...?ğŸ˜¢",
            "ì•—! ê·¸ê±´ ì•„ë‹ˆì—ˆêµ°... ë‹¤ì‹œ ë§í•´ì£¼ì‹¤ ìˆ˜ ìˆì–´?",
            "ì—êµ¬êµ¬... ë‚´ê°€ ì°©ê°í–ˆë‚˜ë´ğŸ˜…",
            "ë‹¤ë¥´ê²Œ ìƒê°í•˜ëŠ”êµ¬ë‚˜! ë” ë“¤ì–´ë³¼ ìˆ˜ ìˆì„ê¹Œ?",
            "ê·¸ë ‡êµ°! ì˜ê²¬ì€ ì–¸ì œë‚˜ í™˜ì˜ì´ì•¼ğŸ˜Š",
            "ê·¸ëŸ° ëœ»ì´ ì•„ë‹ˆì—ˆêµ¬ë‚˜! ë‹¤ì‹œ ì•Œë ¤ì¤˜~",
            "ë¯¸ì•ˆë¯¸ì•ˆ, ë‚´ê°€ ì˜ ì´í•´ ëª»í–ˆì„ ìˆ˜ë„ ìˆì–´ğŸ˜­"
        ]);
    }

    // "ê·¼ë°"
    if (/ê·¼\s*ë°/i.test(text)) {
        return getRandomAnswer([
            "ê·¼ë°â€¦? ê¶ê¸ˆí•œë°, ì´ì–´ì„œ ë§í•´ì¤˜!",
            "ì—‡, ê°‘ìê¸° ê¶ê¸ˆí•´ì¡Œì–´. ë­ê°€?",
            "ì˜¤ì‰? ë­”ê°€ ì´ì–´ì§ˆ ë§ì´ ìˆì„ ê²ƒ ê°™ì€ë°!",
            "ê·¼ë° ê·¸ê±° ì§„ì§œ ì¤‘ìš”í•œ í¬ì¸íŠ¸ ì•„ë‹ê¹Œ?",
            "ì˜¤ì˜¤? ë­”ê°€ ë°˜ì „ ìˆëŠ” ë‚´ìš©ì¸ê°€?",
            "ì•„ ë§ë‹¤, ê·¼ë°â€¦ í•˜ê³  ë§í•˜ë©´ ì™ ì§€ ì¤‘ìš”í•œ ë§ ê°™ì–ì•„!",
            "ê·¼ë° ê·¸ ì–˜ê¸° ì§„ì§œ ë“¤ìœ¼ë©´ ê¹œì§ ë†€ë„ ìˆ˜ë„ ìˆê² ë„¤ğŸ˜²"
        ]);
    }

    // "ìˆì–ì•„"
    if (/ìˆ\s*ì–\s*ì•„/i.test(text)) {
        return getRandomAnswer([
            "ì‘ì‘, ìˆì–ì•„? ë­”ë°! ë§í•´ë´~",
            "ê¸°ëŒ€ë˜ëŠ” ë§íˆ¬ë‹¤â€¦ ë­”ë°! ê¶ê¸ˆí•´!",
            "ìˆì–ì•„~ í•˜ê³  ì‹œì‘í•˜ëŠ” ì–˜ê¸°ëŠ” ê¼­ ì¬ë°ŒëŠ” ì–˜ê¸°ë”ë¼ğŸ˜„",
            "ìˆì–ì•„, ì´ê±° ì•½ê°„ TMIì¼ ìˆ˜ë„ ìˆëŠ”ë°â€¦ ì¢‹ì•„!",
            "ê·¸ ë§íˆ¬ëŠ” ë­”ê°€ ë¹„ë°€ ì–˜ê¸° ê°™ì€ ëŠë‚Œì¸ë°!",
            "ìˆì–ì•„~ í•˜ê³  ì‹œì‘í•˜ë©´ ì™ ì§€ ì„¤ë ˆğŸ˜†",
            "ë­”ê°€ ê·€ì—¬ìš´ ë§íˆ¬ë„¤. ì´ì–´ì„œ ì–¼ë¥¸ ë§í•´ì¤˜~"
        ]);
    }

    // "ì†”ì§íˆ"
    if (/ì†”\s*ì§\s*íˆ/i.test(text)) {
        return getRandomAnswer([
            "ì†”ì§íˆ ë§í•´ë„ ê´œì°®ì•„, ë‚˜ ë¹„ë°€ ì˜ ì§€ì¼œ!ğŸ¤«",
            "ì†”ì§í•œ ì–˜ê¸° ì¢‹ì§€, ë“£ê³  ìˆì–´!",
            "ì†”ì§íˆ! ì´ëŸ° ë§íˆ¬ëŠ” ì§„ì‹¬ ê°€ë“í•œ ëŠë‚Œ~",
            "ë§í•´ë´! ì†”ì§í•œ ì–˜ê¸° ì œì¼ ì¢‹ì•„!",
            "ì†”ì§íˆ í„¸ì–´ë†“ìœ¼ë©´ ì† ì‹œì›í•˜ì–ì•„? ê·¸ì¹˜?",
            "ì´ì œ ì†”ì§ ëª¨ë“œë¡œ ì „í™˜! ë§í•´ì£¼ì„¸ìš”ğŸ™Œ",
            "ì†”ì§íˆ ë‚˜ë„ ê·¸ëŸ° ìƒê° í•´ë³¸ ì  ìˆì–´!"
        ]);
    }

    // "ì§„ì§œ"
    if (/ì§„\s*ì§œ/i.test(text)) {
        return getRandomAnswer([
            "ì§„ì§œ? ì™„ì „ ì§„ì‹¬?!ğŸ˜³",
            "í—‰ ì§„ì§œ? ê·¸ ì •ë„ì•¼?!",
            "ì§„ì§œë¡œ ê·¸ëŸ° ì¼ì´ ìˆì—ˆì–´? ë””í…Œì¼ ì¢€ ë” ì•Œë ¤ì¤˜~",
            "ì§„ì§œ?! ì™€... ì´ê±´ ì¢€ ì¶©ê²©ì¸ë°.",
            "ì§„ì§œë¼ëŠ” ë§ ë“¤ìœ¼ë‹ˆê¹Œ ë” ê¶ê¸ˆí•´ì¡Œì–´!",
            "ì§„ì§œ ì§„ì§œ? ë‘ ë²ˆ ë§í•˜ë©´ ë” ë¯¿ì„ê²Œ!ğŸ˜†",
            "í—, ê·¸ ì •ë„ë©´ ì§„ì§œ ë ˆì „ë“œë„¤ ã…‹ã…‹"
        ]);
    }

    // "ì¸ê°„ì ìœ¼ë¡œ"
    if (/ì¸\s*ê°„\s*ì \s*ìœ¼\s*ë¡œ/i.test(text)) {
        return getRandomAnswer([
            "ì¸ê°„ì ìœ¼ë¡œâ€¦ ë­”ê°€ í•  ë§ ë§ì„ ë•Œ ë‚˜ì˜¤ëŠ” ë§ì´ì§€ ã…ã…",
            "ë§ì•„, ì¸ê°„ì ìœ¼ë¡œ ê·¸ê±´ ì¢€ ê·¸ë˜ğŸ˜…",
            "ì˜¤ì¼€ì´, ì¸ê°„ì ìœ¼ë¡œ ìƒê°í•´ë´…ì‹œë‹¤. ë­”ê°€ìš”?",
            "ì •ë ¹ì ìœ¼ë¡œ ë´ë„ ë„ˆë¬´í•œ ê±° ì•„ë‹ˆì•¼?",
            "ê·¸ìµ¸, ì‚¬ëŒì´ë¼ë©´ ê·¸ë ‡ê²Œ ëŠë‚„ ìˆ˜ë°–ì— ì—†ì§€.",
            "ì •ë ¹ì ìœ¼ë¡œë„ ì¸ì •â€¦ ê·¸ê±´ ì´í•´ë¼ ì™„ì „!",
            "ë”± ë´ë„ ì¸ê°„ì ìœ¼ë¡œ í™”ë‚  ë§Œí•œ ì¼ì´ë„¤ğŸ˜¤"
        ]);
    }

    // "ì•½ê°„"
    if (/ì•½\s*ê°„/i.test(text)) {
        return getRandomAnswer([
            "ì•½ê°„ ì–´ë–¤ ëŠë‚Œì¸ì§€ ì•Œ ê²ƒ ê°™ì•„~",
            "ì•½ê°„? ê·¸ ê°ì • ë¯¸ë¬˜í•˜ê²Œ ì „í•´ì¡Œì–´ ã…ã…",
            "ìŒâ€¦ ì•½ê°„ ê·¸ëŸ° ë‰˜ì•™ìŠ¤? ê³µê°ë¼!",
            "ì•½ê°„ì´ë¼ëŠ” ë§ì— ë­”ê°€ ì—¬ìš´ì´ ìˆì–´â˜ï¸",
            "ì•½ê°„ ê·¸ëŸ° ê±° ì™„ì „ ì´í•´ë¼!",
            "ì•½ê°„ë§Œ ê·¸ëŸ° ê±°ë©´ ë‹¤í–‰ì¼ ìˆ˜ë„ ìˆì§€!",
            "ê·¸ ì•½ê°„ì´ ì€ê·¼ í° ì°¨ì´ë¥¼ ë§Œë“¤ì–´!"
        ]);
    }

    // ...
    if (/ï¹’ï¹’ï¹’/.test(text)) {
        console.log(`text : ${text}`);
        return getRandomAnswer([
            "ë§â€¦ì‡â€¦ëª»â€¦",
            "ë­”ê°€ ë§í•˜ë ¤ë‹¤ê°€ ë§ì„¤ì´ëŠ” ëŠë‚Œì¸ë°...ğŸ˜¯",
            "ì„¸ ê°œì˜ ì ì´ ëª¨ë“  ê±¸ ë§í•´ì£¼ëŠ” ë“¯í•œ ë¶„ìœ„ê¸°â€¦",
            "í•  ë§ ë§ì€ë° ëª» í•˜ëŠ” ê·¸ ëŠë‚Œ ã… ã… ",
            "ë§ˆìŒì€ ì´í•´í–ˆì–´. ì²œì²œíˆ ë§í•´ì¤˜!"
        ]);
    }

    // ì‚¬ì´íŠ¸ ê´€ë ¨ ê¸°ë³¸ ì§ˆë¬¸
    for (const intent of intentList) {
        if (intent.pattern.test(text)) {
            const directAnswer = await fetchAnswer(intent.key);
            return getRandomAnswer([directAnswer.answer]);
        }
    }

    return null;
}

const intentList = [
    { pattern: /ì§ˆë¬¸/i, key: "?" },
    { pattern: /ë­\s*ë¼ê³ /i, key: "?" },
    { pattern: /íšŒì›/i, key: "íšŒì›ê°€ì…" },
    { pattern: /ê³µê²©/i, key: "ê³µê²©" },
    { pattern: /ì´ë™/i, key: "ì´ë™" },
    { pattern: /ë„ê°/i, key: "ë„ê°" },
    { pattern: /ë¬´ê¸°/i, key: "ë¬´ê¸°" },
    { pattern: /ê¸°ë¡/i, key: "ê¸°ë¡" },
    { pattern: /ê°•í™”/i, key: "ê°•í™”" },
    { pattern: /ì»¤ë®¤ë‹ˆí‹°/i, key: "ì»¤ë®¤ë‹ˆí‹°" },
    { pattern: /ì¬í™”/i, key: "ì¬í™”" },
    { pattern: /ìƒì /i, key: "ìƒì " },
    { pattern: /ë‹‰ë„¤ì„/i, key: "ë‹‰ë„¤ì„ ë³€ê²½" },
    { pattern: /ìºì‹œ/i, key: "ìºì‹œ ìƒì " },
    { pattern: /ì •ì›/i, key: "ì •ì›" },
    { pattern: /ì¹œêµ¬/i, key: "ì¹œêµ¬" },
    { pattern: /ì„œë¦¬/i, key: "ì„œë¦¬" },
    { pattern: /ë„ì›€/i, key: "ë„ì›€" }
];