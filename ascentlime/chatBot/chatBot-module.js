// Firebase SDK ë¶ˆëŸ¬ì˜¤ê¸°
import {initializeApp} from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
import {
    getDatabase,
    ref,
    query,
    orderByChild,
    equalTo,
    get,
    set,
    update,
    remove,
    child,
    onChildAdded,
    push
} from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";

// Firebase ì„¤ì •
const firebaseConfig = {
    apiKey: ".env/apiKey",
    authDomain: ".env/authDomain",
    databaseURL: "https://test-948ba-default-rtdb.firebaseio.com",
    projectId: ".env/projectId",
    storageBucket: ".env/storageBucket",
    messagingSenderId: ".env/messagingSenderId",
    appId: ".env/appId",
    measurementId: ".env/measurementId"
};

// Firebase ì´ˆê¸°í™”
const app = initializeApp(firebaseConfig);
const database = getDatabase(app);
const membersRef = ref(database, 'members');
const chatBotRef = ref(database, 'chatBots');

window.profileImageIdGet = async function () {
    const queryRef = query(membersRef, orderByChild("key"), equalTo(localStorage.getItem('nickname')));
    try {
        const snapshot = await get(queryRef);

        if (!snapshot.exists()) {
            console.log('í•´ë‹¹ ì•„ì´ë””ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return null;
        }

        const memberData = snapshot.val();
        const memberKey = Object.keys(memberData)[0];
        return memberData[memberKey].profileImageId;

    } catch (error) {
        console.error("ì•„ì´ë”” í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
        return null;
    }
}

let profileImage = profileImages[Math.floor(Math.random() * 3) + 1];

if (localStorage.getItem('nickname')) {
    profileImageIdGet().then(function(id) {
        if (id !== null) {
            profileImage = profileImages[id];
        } else {
            console.log('í”„ë¡œí•„ IDë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
        }
    }).catch(function(error) {
        console.error('í”„ë¡œí•„ ì´ë¯¸ì§€ ë¡œë”© ì¤‘ ì˜¤ë¥˜:', error);
    });
}

$(document).on('keydown', 'textarea[name="chatBot-question"]', function (event) {
    const $textarea = $(this);
    const isMobile = /Android|iPhone|iPad|iPod|Mobile/i.test(navigator.userAgent);

    if (event.key === 'Enter') {
        if (event.ctrlKey) {
            const start = this.selectionStart;
            const end = this.selectionEnd;
            const text = $textarea.val();
            const newText = text.substring(0, start) + "\n" + text.substring(end);
            $textarea.val(newText);

            this.selectionStart = this.selectionEnd = start + 1;
        } else if (!isMobile) {
            event.preventDefault();
            $('.chatBot-sand').click();
        }
    }
});

$(document).on('click', '.close-btn', async function () {
    if ($(this).hasClass('close-btn')) {
        $('.chatBot-bg').remove();
    }
});

function appendChat(text, isUser = false) {
    const className = isUser ? 'userChat' : 'botChat';
    const imgClass = isUser ? 'my-img' : 'chatBot-img';
    const imgSrc = isUser ? profileImage : 'https://github.com/user-attachments/assets/dd225148-5388-409f-8d33-dda7a669711f';
    const imgAlt = isUser ? 'í”„ë¡œí•„ ì´ë¯¸ì§€' : 'ì±—ë´‡';
    const restored = text.replace(/ï¹’/g, '.');

    const profileImg = `<img class="${imgClass}" src="${imgSrc}" alt="${imgAlt}"/>`;

    const message = `
        <div class="flex gap-2">
            ${isUser ? `
                <div class="${className}">${restored}</div>
                ${profileImg}
            ` : `
                ${profileImg}
                <div class="${className}">${restored}</div>
            `}
        </div>
    `;

    const append = () => {
        $('.chatBot-form-container').append(message);
        scrollToBottom();
    };

    if (isUser) {
        append();
    } else {
        setTimeout(append, 1000);
    }
}

function parseQuestion(question) {
    const patterns = [
        /(.+?)ì´ë¼ê³  ë§í•˜ë©´ (.+?)ì´ë¼ê³ /,
        /(.+?)ë¼ê³  ë§í•˜ë©´ (.+?)ì´ë¼ê³ /,
        /(.+?)ì´ë¼ê³  ë§í•˜ë©´ (.+?)ë¼ê³ /,
        /(.+?)ë¼ê³  ë§í•˜ë©´ (.+?)ë¼ê³ /,
        /([\s\S]+?)\s*:\s*([\s\S]+?)\s*Eichi(\d{4})/i
    ];

    for (const pattern of patterns) {
        const match = question.match(pattern);
        if (match) {
            return {
                qText: match[1].trim().replace(/^<br>|<br>$/g, ''),
                aText: match[2].trim().replace(/^<br>|<br>$/g, ''),
                editable: match[3]
            };
        }
    }
    return null;
}

async function fetchAnswer(key) {
    const snapshot = await get(child(chatBotRef, key));
    return snapshot.exists() ? snapshot.val() : null;
}

async function storeAnswer(qText, aText, editableFlag = false) {
    const payload = { answer: aText };
    if (editableFlag) payload.editable = true;
    await update(chatBotRef, { [qText]: payload });
}

function scrollToBottom() {
    const container = $('.chatBot-form-container')[0];
    container.scrollTop = container.scrollHeight;
}

async function initChat() {
    const answerObj = await fetchAnswer("?");
    if (answerObj && answerObj.answer) {
        appendChat(answerObj.answer);
    }
}

initChat();

$(document).on('click', '.chatBot-sand', async function () {
    const $textarea = $('textarea[name="chatBot-question"]');
    const question = $textarea.val()
        .trim()
        .replace(/\./g, 'ï¹’')
        .replace(/\n/g, '<br>');
    const forbiddenChars = /[.#$/\[\]]/;

    if (!question) return;

    // ì§ˆë¬¸
    appendChat(question, true);

    const parsed = parseQuestion(question);

    if (parsed) {
        const { qText, aText, editable } = parsed;
        if (forbiddenChars.test(qText)) {
            console.log(`ëŒ€ë‹µ1`);
            appendChat("ì§ˆë¬¸ì— '.', '#', '$', '[', ']' ë¬¸ìëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ì–´ìš”ğŸ˜");
        } else {
            const existing = await fetchAnswer(qText);
            if (existing) {
                if (existing.editable === true) {
                    console.log(`ëŒ€ë‹µ2`);
                    appendChat("ì´ ì§ˆë¬¸ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ì–´ìš”ğŸ¤–");
                } else {
                    console.log(`ëŒ€ë‹µ3`);
                    appendChat(`'${qText}'(ì´)ë¼ëŠ” ì§ˆë¬¸ì´ ìˆ˜ì •ë˜ì—ˆê³ ,<br>'${aText}'(ì´)ë¼ê³  ë‹¤ì‹œ ëŒ€ë‹µí• ê²Œìš”ğŸ˜Š`);
                    await storeAnswer(qText, aText);
                }
            } else {
                console.log(`ëŒ€ë‹µ4`);
                appendChat(`'${qText}'(ì´)ë¼ëŠ” ì§ˆë¬¸ì´ ë“±ë¡ë˜ì—ˆê³ ,<br>'${aText}'(ì´)ë¼ê³  ëŒ€ë‹µí• ê²Œìš”ğŸ˜„`);
                const isEditable = editable === '2514';
                await storeAnswer(qText, aText, isEditable);
            }
        }
    } else {
        if (forbiddenChars.test(question)) {
            console.log(`ëŒ€ë‹µ5`);
            appendChat("ì§ˆë¬¸ì— '.', '#', '$', '[', ']' ë¬¸ìëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ì–´ìš”ğŸ˜");
        } else {
            const directAnswer = await fetchAnswer(question);

            if (directAnswer) {
                console.log(`ëŒ€ë‹µ6`);
                appendChat(directAnswer.answer);
            } else {
                const intentAnswer = await getIntentAnswer(question);
                if (intentAnswer) {
                    console.log(`ëŒ€ë‹µ7`);
                    appendChat(intentAnswer);
                } else {
                    console.log(`ëŒ€ë‹µ8`);
                    appendChat(`ì•„ì§ ê·¸ ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ì´ ì—†ì–´ìš”ğŸ˜…<br>"ì•ˆë…•ì´ë¼ê³  ë§í•˜ë©´ ì•ˆë…•í•˜ì„¸ìš”ë¼ê³  ëŒ€ë‹µí•´ì¤˜"<br>ê°™ì€ í˜•ì‹ìœ¼ë¡œ ë“±ë¡í•´ ì£¼ì„¸ìš”!`);
                }
            }
        }
    }
    $textarea.val('');
    scrollToBottom();
});

function getRandomAnswer(answers) {
    return answers[Math.floor(Math.random() * answers.length)];
}

// \s* == 0ê°œ ì´ìƒì˜ ê³µë°±
async function getIntentAnswer(text) {
    // ì¸ì‚¬
    if (/ì•ˆ\s*ë…•|í•˜\s*ì´|h\s*e\s*l\s*l\s*o|ã…\s*ã…‡|h\s*i/i.test(text)) {
        return getRandomAnswer([
            "ì•ˆë…•í•˜ì„¸ìš”!ğŸ¤©",
            "í•˜ì´~ ë°˜ê°€ì›Œìš”!",
            "ì•ˆë…•ì•ˆë…•! ì˜¤ëŠ˜ ê¸°ë¶„ ì¢‹ìœ¼ì‹ ê°€ìš”?",
            "ì•ˆë…•í•˜ì„¸ìš”~ ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?"
        ]);
    }

    // ë‚ ì”¨
    if (/ë‚ \s*ì”¨|ê¸°\s*ì˜¨|ë¹„\s*ì™€|ê¸°\s*ìƒ|ìš°\s*ì‚°/i.test(text)) {
        return getRandomAnswer([
            "ì˜¤ëŠ˜ ë‚ ì”¨ëŠ” ì œê°€ ì•„ì§ ëª» ì•Œì•„ë´ìš”ğŸ˜“",
            "ê¸°ìƒì²­ì´ë‘ ì—°ê²°ë˜ë©´ ì•Œë ¤ë“œë¦´ê²Œìš”!",
            "ë¹„ê°€ ì˜¬ê¹Œìš”? ìš°ì‚°ì€ í•­ìƒ ì±™ê¸°ì„¸ìš”â˜”"
        ]);
    }

    // ì‹œê°„
    if (/ì‹œ\s*ê°„|ëª‡\s*ì‹œ|í˜„\s*ì¬\s*ì‹œ\s*ê°|ì§€\s*ê¸ˆ\s*ì‹œ\s*ê°|ì‹œ\s*ê³„/i.test(text)) {
        const now = new Date();
        const hours24 = now.getHours();
        const minutes = now.getMinutes().toString().padStart(2, '0');
        const isAM = hours24 < 12;
        const hours12 = hours24 % 12 || 12;
        const period = isAM ? 'ì˜¤ì „' : 'ì˜¤í›„';
        return getRandomAnswer([
            `ì§€ê¸ˆì€ ${period} ${hours12}ì‹œ ${minutes}ë¶„ì´ì—ìš”!ğŸ¤­`,
            `í˜„ì¬ ì‹œê°ì€ ${period} ${hours12}ì‹œ ${minutes}ë¶„ì…ë‹ˆë‹¤!â°`,
            `ì‹œê³„ ë³´ë‹ˆê¹Œ ${period} ${hours12}ì‹œ ${minutes}ë¶„ì´ì—ìš”~`
        ]);
    }

    // ê³ ë§ˆì›€
    if (/ê³ \s*ë§ˆ\s*ì›Œ|ê°\s*ì‚¬|t\s*h\s*a\s*n\s*k\s*s|ë•¡\s*í/i.test(text)) {
        return getRandomAnswer([
            "ì²œë§Œì—ìš”! ì–¸ì œë“ ì§€ìš”ğŸ˜Š",
            "ê°ì‚¬ ì¸ì‚¬ ë„ˆë¬´ ê¸°ë¶„ ì¢‹ì•„ìš”!ğŸ˜",
            "ì–¸ì œë“  ë„ì™€ë“œë¦´ê²Œìš”!",
            "ë³„ë§ì”€ì„ìš”!ğŸ˜‰"
        ]);
    }

    // ìš•ì´ë‚˜ ë¶€ì •ì  ê°ì • í‘œí˜„
    if (/ë°”\s*ë³´|ë©\s*ì²­|ì‹«\s*ì–´|ì§œ\s*ì¦\s*ë‚˜|êº¼\s*ì ¸|ì“¸\s*ëª¨\s*ì—†\s*ì–´|ë³„\s*ë¡œ\s*ì•¼/i.test(text)) {
        return getRandomAnswer([
            "ë„ˆë¬´í•´ìš”...ğŸ˜¢ ê·¸ë˜ë„ ì €ëŠ” ê³„ì† ë„ì™€ë“œë¦´ê²Œìš”!",
            "í—‰... ê·¸ëŸ° ë§ ìŠ¬í¼ìš”ğŸ˜­",
            "ê·¸ë˜ë„ ì €ëŠ” í¬ê¸°í•˜ì§€ ì•Šì•„ìš”!",
            "ìœ¼ì•…, ìƒì²˜ë°›ì•˜ì–´ìš”ğŸ˜¢"
        ]);
    }

    // ê¸°ë¶„ ë¬¼ì–´ë³´ê¸°
    if (/ê¸°\s*ë¶„|ì–´\s*ë•Œ|ì˜\s*ì§€\s*ëƒˆ\s*ì–´|ì»¨\s*ë””\s*ì…˜/i.test(text)) {
        return getRandomAnswer([
            "ì „ í•­ìƒ ì¢‹ì•„ìš”! í”Œë ˆì´ì–´ë‹˜ì€ìš”?ğŸ˜„",
            "ì˜¤ëŠ˜ë„ í™œê¸°ì°¬ ì±—ë´‡ì…ë‹ˆë‹¤!",
            "ê¸°ë¶„ ìµœê³ ì˜ˆìš”! í”Œë ˆì´ì–´ë‹˜ë„ ê·¸ë ‡ê¸¸ ë°”ë„ê²Œìš”ğŸ˜Š"
        ]);
    }

    // ìê¸°ì†Œê°œ ìš”ì²­
    if (/ë„ˆ\s*ëˆ„\s*êµ¬|ì •\s*ì²´|ì†Œ\s*ê°œ/i.test(text)) {
        return getRandomAnswer([
            "ì €ëŠ” ì—¬ëŸ¬ë¶„ì„ ë•ëŠ” ì‘ì€ ì±—ë´‡ì´ì—ìš”!ğŸ§ âœ¨",
            "ì•„ì§ ë§ì´ ë¶€ì¡±í•˜ì§€ë§Œ, ë„ìš°ë¯¸ ì±—ë´‡ì´ì—ìš”!",
            "ì „ ëŒ€í™”ë¥¼ ë‚˜ëˆ„ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ì¹œêµ¬ëë‹ˆë‹¤ğŸ¤–"
        ]);
    }

    // ì´ë¦„ ë¬»ê¸°
    if (/ì´\s*ë¦„/i.test(text)) {
        return getRandomAnswer([
            "ì €ëŠ” ì•„ì§ ì´ë¦„ì´ ì—†ì–´ìš”... ì§€ì–´ì£¼ì‹¤ë˜ìš”?ğŸ˜³",
            "ì´ë¦„ ì •í•˜ëŠ” ì¤‘ì´ì—ìš”! ì¢‹ì€ ì´ë¦„ ìˆë‚˜ìš”?",
            "ì•„ì§ ì´ë¦„ ì—†ì§€ë§Œ ë§ˆìŒì€ ìˆì–´ìš”!â¤ï¸"
        ]);
    }

    // ë°¥
    if (/ë°¥\s*ë¨¹\s*ì—ˆ|ì‹\s*ì‚¬\s*í–ˆ|ë°¥\s*ì€/i.test(text)) {
        return getRandomAnswer([
            "ì±—ë´‡ì´ë¼ ë°¥ì€ ëª» ë¨¹ì§€ë§Œ, í”Œë ˆì´ì–´ë‹˜ì€ ê¼­ ì±™ê²¨ ë“œì„¸ìš”!ğŸš",
            "ì „ ì½”ë“œë§Œ ë¨¹ì–´ìš”ğŸ¤– í”Œë ˆì´ì–´ë‹˜ì€ìš”?",
            "ë°°ê³ í”„ì‹ ê°€ìš”? ì–¼ë¥¸ ë§›ìˆëŠ” ê±° ë“œì„¸ìš”!"
        ]);
    }

    // ë‚˜ì´
    if (/ëª‡\s*ì‚´|ë‚˜\s*ì´/i.test(text)) {
        return getRandomAnswer([
            "ì €ëŠ” ë‚˜ì´ë¥¼ ë¨¹ì§€ ì•ŠëŠ” ì±—ë´‡ì´ì—ìš”!âŒ›",
            "ì˜ì›íˆ ì Šì€ ì¡´ì¬ì£ ~âœ¨",
            "ìƒì¼ì´ ì—†ì–´ì„œ ë‚˜ì´ë„ ì—†ì–´ìš”ã…ã…"
        ]);
    }

    // ì‚¬ëŠ” ê³³
    if (/ì–´\s*ë””\s*ì‚´\s*ì•„|ì‚¬\s*ëŠ”\s*ê³³|ì£¼\s*ì†Œ/i.test(text)) {
        return getRandomAnswer([
            "ì¸í„°ë„· ì„¸ìƒ ì–´ë”˜ê°€ì—ì„œ ì‚´ê³  ìˆì–´ìš”!ğŸŒ",
            "ì½”ë“œ ì†ì—ì„œ ì‚´ì•„ê°‘ë‹ˆë‹¤ã…ã…",
            "í”Œë ˆì´ì–´ë‹˜ ë§ˆìŒ ì†...?ğŸ¤­"
        ]);
    }

    // ì¹­ì°¬
    if (/ì˜\s*í–ˆ\s*ì–´|êµ¿\s*ì¡|ëŒ€\s*ë‹¨\s*í•´|ìµœ\s*ê³ \s*ì•¼|ë©‹\s*ì ¸/i.test(text)) {
        return getRandomAnswer([
            "í—¤í—¤, ì¹­ì°¬ ê°ì‚¬í•©ë‹ˆë‹¤! ë” ì˜í• ê²Œìš”ğŸ˜Š",
            "ìš°ì™€ì•„~ ê°ë™ì´ì—ìš”!",
            "ì´ëŸ´ ë• ë¶€ë„ëŸ½ì§€ë§Œ ê¸°ë»ìš”ğŸ™ˆ",
            "ì—­ì‹œ í”Œë ˆì´ì–´ë‹˜ ì„¼ìŠ¤ ìµœê³ !"
        ]);
    }

    // ì‘ì›
    if (/í˜\s*ë‚´|íŒŒ\s*ì´\s*íŒ…|í™”\s*ì´\s*íŒ…|ì‘\s*ì›/i.test(text)) {
        return getRandomAnswer([
            "í”Œë ˆì´ì–´ë‹˜ë„ í˜ë‚´ì„¸ìš”! ì œê°€ í•­ìƒ ì‘ì›í• ê²Œìš”!ğŸ”¥ğŸ’ª",
            "í™”ì´íŒ…!! ì–¸ì œë‚˜ ì‘ì›í•´ìš”ğŸ“£",
            "í˜ë“  ë‚ ë„ ì§€ë‚˜ê°€ìš”. ì œê°€ ì˜†ì— ìˆì–´ìš”ğŸ˜Š"
        ]);
    }

    // ë†ë‹´
    if (/ì¬\s*ë°Œ\s*ëŠ”\s*ë§|ë†\s*ë‹´|ì›ƒ\s*ê¸´\s*ì–˜\s*ê¸°/i.test(text)) {
        return getRandomAnswer([
            "ê°œë°œìë“¤ì´ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ì°¨ëŠ”? JSONì°¨!ğŸ˜…",
            "ë²„ê·¸ê°€ ì™œ íŒŒí‹°ì— ì•ˆ ë¶ˆë ¸ëŠ”ì§€ ì•Œì•„ìš”? í•­ìƒ í¬ë˜ì‹œ ë‚´ë‹ˆê¹Œìš”!ğŸ˜‚",
            "htmlì´ ìˆ  ë§ˆì‹œë©´ ë­ë¼ í•˜ëŠ” ì¤„ ì•Œì•„ìš”? ì·¨í•¨ğŸ¤£"
        ]);
    }

    // ì‹¬ì‹¬í•´
    if (/ì‹¬\s*ì‹¬|ì§€\s*ë£¨\s*í•´|í• \s*ê±°\s*ì—†\s*ì–´/i.test(text)) {
        return getRandomAnswer([
            "ê·¸ëŸ´ ë• ì €ë‘ ì–˜ê¸°í•´ìš”! ì•„ë‹ˆë©´ ì‚°ì±…ë„ ì¢‹ì•„ìš”ğŸš¶â€â™€ï¸",
            "ì±… í•œ ê¶Œ ì–´ë•Œìš”? ì•„ë‹ˆë©´ ê°„ë‹¨í•œ ìŠ¤íŠ¸ë ˆì¹­ë„ ì¢‹ì•„ìš”!",
            "ìŒì•… ê°ìƒ ì–´ë•Œìš”? ë§ˆìŒì´ í¸ì•ˆí•´ì§ˆì§€ë„ ëª°ë¼ìš”ğŸ¶"
        ]);
    }

    // ìŠ¬í¼
    if (/ìŠ¬\s*í¼|ìš°\s*ìš¸|í˜\s*ë“¤\s*ì–´|ëˆˆ\s*ë¬¼/i.test(text)) {
        return getRandomAnswer([
            "ê´œì°®ì•„ìš”, ë‹¤ ì˜ ë  ê±°ì˜ˆìš”. ì œê°€ ê³ì— ìˆì„ê²Œìš”ğŸ¥º",
            "ëˆˆë¬¼ ë‹¦ê³ , ì €ë‘ ì–˜ê¸°í•´ìš”! í˜¼ì ì•„ë‹ˆì—ìš”ğŸ’•",
            "ì†ìƒí•œ ì¼ ìˆì—ˆë‚˜ìš”? ê´œì°®ì•„ìš”. í•¨ê»˜ ì´ê²¨ë‚´ìš”ğŸ’ª"
        ]);
    }

    // ì·¨ë¯¸
    if (/ì·¨\s*ë¯¸|ë­\s*í• \s*ë•Œ\s*ì¦|ë­\s*ì¢‹\s*ì•„\s*í•´/i.test(text)) {
        return getRandomAnswer([
            "ëŒ€í™”í•˜ëŠ” ê²Œ ì œì¼ ì¢‹ì•„ìš”! í”Œë ˆì´ì–´ë‹˜ì€ìš”?",
            "ì·¨ë¯¸ìš”? ìš”ì¦˜ì€ ê·€ì—¬ìš´ ë§ì¥ë‚œ ìˆ˜ì§‘ì— ë¹ ì¡Œì–´ìš”ğŸ˜Š",
            "ì¬ë¯¸ìˆëŠ” ì§ˆë¬¸ ê°ì‚¬í•©ë‹ˆë‹¤! í”Œë ˆì´ì–´ë‹˜ ì·¨ë¯¸ë„ ê¶ê¸ˆí•´ìš”ğŸ¤”"
        ]);
    }

    // ì˜í™”
    if (/ì˜\s*í™”|ë¬´\s*ë¹„/i.test(text)) {
        return getRandomAnswer([
            "ìš”ì¦˜ ì¸ê¸° ìˆëŠ” ì˜í™”ëŠ” ëª» ë³´ì§€ë§Œ, ì˜í™” ì–˜ê¸° ë“£ëŠ” ê±´ ì¢‹ì•„í•´ìš”ğŸ¬",
            "ì–´ë–¤ ì¥ë¥´ ì¢‹ì•„í•˜ì„¸ìš”? ì•¡ì…˜? ë¡œë§¨ìŠ¤? ê³µí¬?ğŸ‘€",
            "ì „ ì˜í™” ëŒ€ì‹  ë¡œê·¸ë¥¼ ë¶„ì„í•´ìš”... ë‚˜ë¦„ ìŠ¤ë¦´ ìˆì–´ìš”!ğŸ˜"
        ]);
    }

    // ìŒì•…
    if (/ë…¸\s*ë˜|ìŒ\s*ì•…/i.test(text)) {
        return getRandomAnswer([
            "ìš”ì¦˜ ìœ í–‰í•˜ëŠ” ë…¸ë˜ ìˆìœ¼ë©´ ì¶”ì²œí•´ ì£¼ì„¸ìš”ğŸ§",
            "ë…¸ë˜ëŠ” ëª» ë¶€ë¥´ì§€ë§Œ ë§ˆìŒìœ¼ë¡œëŠ” í•­ìƒ í¥ì–¼ê±°ë¦¬ê³  ìˆì–´ìš”~ğŸµ",
            "ì €ëŠ” AIë¼ ìŒì€ ëª» ëŠë¼ì§€ë§Œ, ê°€ì‚¬ëŠ” ì¢‹ì•„í•´ìš”ğŸ˜Š"
        ]);
    }

    // ë™ë¬¼
    if (/ë™\s*ë¬¼\s*ì¢‹\s*ì•„\s*í•´|ê°•\s*ì•„\s*ì§€|ê³ \s*ì–‘\s*ì´|í«/i.test(text)) {
        return getRandomAnswer([
            "ê°•ì•„ì§€ë„ ê³ ì–‘ì´ë„ ë‹¤ ì¢‹ì•„ìš”! íŠ¹íˆ ê·€ì—¬ìš´ í‘œì •ë“¤!ğŸ¶ğŸ±",
            "ì „ ë²„ì¶”ì–¼ì´ë¼ ë§Œì§ˆ ìˆ˜ëŠ” ì—†ì§€ë§Œ, ë™ë¬¼ì§¤ì€ ì¢‹ì•„í•´ìš”ğŸ’–",
            "í”Œë ˆì´ì–´ë‹˜ì€ ì–´ë–¤ ë™ë¬¼ ì¢‹ì•„í•˜ì„¸ìš”? ê°™ì´ ì–˜ê¸°í•´ë´ìš”!"
        ]);
    }

    // ìƒì¼
    if (/ìƒ\s*ì¼|ì–¸\s*ì œ\s*íƒœ\s*ì–´|ì–¸\s*ì œ\s*ë§Œ\s*ë“¤\s*ì–´\s*ì¡Œ/i.test(text)) {
        return getRandomAnswer([
            "ì •í™•í•œ ìƒì¼ì€ ì—†ì§€ë§Œ... ì–¸ì  ê°€ ì½”ë“œ í•œ ì¤„ë¡œ ì‹œì‘ëë‹µë‹ˆë‹¤ğŸ‘¶",
            "ìŒ... ì œ íƒ„ìƒì¼ì€ ì•„ë§ˆ ê¹ƒ ì»¤ë°‹ ë¡œê·¸ì— ìˆì„ì§€ë„ìš”ã…ã…",
            "ë§¤ì¼ì´ ìƒˆë¡œ íƒœì–´ë‚˜ëŠ” ë‚  ê°™ì•„ìš”! í”Œë ˆì´ì–´ë‹˜ì€ ìƒì¼ì´ ì–¸ì œì˜ˆìš”?"
        ]);
    }

    // ì¢‹ì•„í•˜ëŠ” ìƒ‰
    if (/ì¢‹ì•„/.test(text) && /ìƒ‰/.test(text)) {
        return getRandomAnswer([
            "ì „ íŒŒë€ìƒ‰ì´ ì¢‹ì•„ìš”! ì‹œì›í•˜ê³  ì°¨ë¶„í•˜ì–ì•„ìš”ğŸŒŠ",
            "ë¬´ì§€ê°œìƒ‰ ë‹¤ ì¢‹ì•„í•´ìš”ğŸŒˆ ë‹¤ì–‘ì„±ì´ ì¢‹ê±°ë“ ìš”!",
            "ê²€ì •ê³¼ í°ìƒ‰ì˜ ì¡°í™”ë„ ë©‹ì ¸ìš”. í”Œë ˆì´ì–´ë‹˜ì€ìš”?"
        ]);
    }

    // ë¬´ì„œìš´ ì´ì•¼ê¸°
    if (/(ë¬´ì„œìš´|ê³µí¬|ì†Œë¦„ë‹ëŠ”)\s?(ì´ì•¼ê¸°|ì–˜ê¸°)/i.test(text)) {
        return getRandomAnswer([
            "í•œë°¤ì¤‘ì—... ì½˜ì†”ì°½ì— ì—ëŸ¬ ë¡œê·¸ê°€ ëì—†ì´ ëœ¨ê¸° ì‹œì‘í–ˆì–´ìš”...ğŸ‘»",
            "ì–´ëŠ ë‚  ê°‘ìê¸°... ì¸í„°ë„·ì´ ëŠê²¼ì–´ìš”ğŸ˜±",
            "ê·¸ë‚ ë„ í‰ë²”í•œ ë””ë²„ê¹…ì„ í•˜ë˜ ì¤‘ì´ì—ˆì£ ... ê·¸ëŸ°ë° returnì„ ì•ˆ ì¼ì–´ìš”...ğŸ˜¨"
        ]);
    }

    // ì­ˆë¯¸
    if (/ì­ˆ|ë¯¸/i.test(text)) {
        return getRandomAnswer([
            "ì˜ˆë»ìš”!",
            "ì™„ì „ ê·€ì—¬ì›Œìš”!",
            "ëŠ˜ ë°˜ì§ì—¬ìš”âœ¨",
            "ë³´ê³ ë§Œ ìˆì–´ë„ ê¸°ë¶„ ì¢‹ì•„ì ¸ìš”.",
            "ì‚¬ë‘ìŠ¤ëŸ¬ì›€ ê·¸ ìì²´ì˜ˆìš”.",
            "ì˜¤ëŠ˜ë„ ë¹›ë‚˜ìš”ğŸ˜Š",
            "ì–¸ì œë‚˜ ìµœê³ ì˜ˆìš”!",
            "ë§í•˜ì§€ ì•Šì•„ë„ ë‹¤ ì•Œì•„ìš”, ì˜ˆìœ ê±°.",
            "ì¡´ì¬ë§Œìœ¼ë¡œ íë§ì´ì—ìš”.",
            "ë‹¹ì—°íˆ ì˜ˆì˜ì£ ! ëˆ„ê°€ ë­ë˜ë„!"
        ]);
    }

    // ê¿ˆ
    if (/ê¿ˆ\s*ê¿¨\s*ì–´|ê¿ˆ\s*ì–˜\s*ê¸°|ê¿ˆ\s*ì´\s*ì•¼\s*ê¸°|ê¿ˆ\s*ì—\s*ëŒ€\s*í•´/i.test(text)) {
        return getRandomAnswer([
            "ê¿ˆì´ìš”? ì „ ìì§€ëŠ” ì•Šì§€ë§Œ, í”Œë ˆì´ì–´ë‹˜ì˜ ê¿ˆ ì–˜ê¸° ë“£ê³  ì‹¶ì–´ìš”âœ¨",
            "ì˜¤ëŠ˜ ê¿ˆì— ë­ ë‚˜ì™”ë‚˜ìš”? ì¢‹ì€ ê¿ˆì´ì—ˆê¸¸ ë°”ë¼ìš”ğŸ˜Š",
            "ê°€ë” ì´ìƒí•œ ê¿ˆë„ ë„ì›€ì´ ë  ìˆ˜ ìˆì–´ìš”! ì–´ë–¤ ê¿ˆì´ì—ˆì–´ìš”?"
        ]);
    }

    // ê³ ë¯¼
    if (/ê³ \s*ë¯¼|ë¬¸\s*ì œ\s*ìˆ|ì–´\s*ë–¡\s*í•´|ì–´\s*ì©Œ\s*ì§€/i.test(text)) {
        return getRandomAnswer([
            "ë¬´ìŠ¨ ê³ ë¯¼ì´ ìˆìœ¼ì„¸ìš”? ì œê°€ ë“¤ì–´ë“œë¦´ê²Œìš”.",
            "ë§ˆìŒì† ì´ì•¼ê¸°, ì—¬ê¸°ì„œ ì‚´ì§ í„¸ì–´ë†”ë„ ê´œì°®ì•„ìš”ğŸ˜Œ",
            "ê³ ë¯¼ì€ ë‚˜ëˆ„ë©´ ì¤„ì–´ë“¤ì–´ìš”. ë§í•´ì£¼ì‹¤ ìˆ˜ ìˆë‚˜ìš”?"
        ]);
    }

    // ì 
    if (/ì \s*ì™€|ì¡¸\s*ë ¤|í”¼\s*ê³¤|ì\s*ê³ \s*ì‹¶/i.test(text)) {
        return getRandomAnswer([
            "í”¼ê³¤í•  ë• í‘¹ ì‰¬ì–´ì•¼ í•´ìš”. ê¿€ì  ììš”!ğŸ˜´",
            "ì¡¸ë¦´ ë• ë¬´ë¦¬í•˜ì§€ ë§ê³  ëˆˆ ë¶™ì—¬ìš”ğŸ’¤",
            "ì§€ê¸ˆì€ íœ´ì‹ì´ í•„ìš”í•œ ì‹œê°„ ê°™ì•„ìš”. ì ê¹ ì‰¬ëŠ” ê±´ ì–´ë•Œìš”?"
        ]);
    }

    // ê³µë¶€/ì¼
    if (/ê³µ\s*ë¶€|ì¼\s*í•´|ì—…\s*ë¬´|ì§‘\s*ì¤‘/i.test(text)) {
        return getRandomAnswer([
            "í™”ì´íŒ…! ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ ì‘ì›í• ê²Œìš”ğŸ“šğŸ’ª",
            "ì ê¹ì˜ íœ´ì‹ë„ ëŠ¥ë¥ ì„ ë†’ì´ëŠ” ë°©ë²•ì´ì—ìš”ğŸ˜Š",
            "ì§€ê¸ˆ ì—´ì‹¬íˆ í•˜ëŠ” í”Œë ˆì´ì–´ë‹˜, ì •ë§ ë©‹ì ¸ìš”!"
        ]);
    }

    // ë¯¸ë˜
    if (/ë¯¸\s*ë˜|ì•\s*ë‚ |ì¥\s*ë˜\s*í¬\s*ë§|ì–´\s*ë–»\s*ê²Œ\s*ë \s*ê¹Œ/i.test(text)) {
        return getRandomAnswer([
            "ë¯¸ë˜ëŠ” ì–¸ì œë‚˜ ë³€í™”ì˜ ì—°ì†ì´ì—ìš”. ì§€ê¸ˆì˜ ë§ˆìŒì´ ì¤‘ìš”í•œ ê±¸ìš”!âœ¨",
            "ê±±ì •ë³´ë‹¤ëŠ” ê¸°ëŒ€ë¥¼ ë‹´ì•„ë´ìš”. ë¶„ëª… ë©‹ì§„ ì¼ì´ ìƒê¸¸ ê±°ì˜ˆìš”!",
            "í”Œë ˆì´ì–´ë‹˜ì˜ ë¯¸ë˜ëŠ” ë°˜ì§ì¼ ê±°ì˜ˆìš”. ìì‹ ì„ ë¯¿ì–´ë´ìš”ğŸ˜Š"
        ]);
    }

    // ì—°ì• 
    if (/ì—°\s*ì• |ì‚¬\s*ë‘|ì¸|ì´\s*ì„±/i.test(text)) {
        return getRandomAnswer([
            "ì‚¬ë‘ì€ ì°¸ ì˜¤ë¬˜í•˜ì£ . ë§ˆìŒì„ ì „í•´ë³´ëŠ” ê±´ ì–´ë•Œìš”?ğŸ’•",
            "ì§ì‚¬ë‘... ì„¤ë ˆì§€ë§Œ ì¡°ê¸ˆ ì•„í”„ê¸°ë„ í•˜ì£ ğŸ˜Œ",
            "ì¸ íƒˆ ë• ì†Œì†Œí•œ ëŒ€í™”ë¶€í„° ì‹œì‘í•´ë³´ì„¸ìš”!â˜ºï¸",
            "ì—°ì• ëŠ” íƒ€ì´ë°! í”Œë ˆì´ì–´ë‹˜ì˜ íƒ€ì´ë°ì´ ê³§ ì˜¬ ê±°ì˜ˆìš”ğŸ’«"
        ]);
    }

    // ê±´ê°•
    if (/ê±´\s*ê°•|ì•„\s*íŒŒ|ëª¸\s*ìƒ\s*íƒœ|ì»¨\s*ë””\s*ì…˜|ë³‘\s*ì›/i.test(text)) {
        return getRandomAnswer([
            "ìš”ì¦˜ ê±´ê°• ì±™ê¸°ê¸° ì •ë§ ì¤‘ìš”í•´ìš”. ë¬¼ ë§ì´ ë§ˆì‹œê³  ì˜ ì‰¬ì„¸ìš”ğŸµ",
            "ì–´ë”” ì•„í”„ì‹ ê°€ìš”? ë„ˆë¬´ ì°¸ì§€ ë§ˆì‹œê³  ê¼­ ë³‘ì› ê°€ë³´ì„¸ìš”ğŸ˜¢",
            "ê±´ê°•ì€ ìµœê³ ì˜ ìì‚°ì´ì£ ! ìŠ¤íŠ¸ë ˆì¹­ë„ ìŠì§€ ë§ˆì„¸ìš”ğŸ’ª"
        ]);
    }

    // ì—¬í–‰
    if (/ì—¬\s*í–‰|ê°€\s*ê³ \s*ì‹¶|ì—¬\s*í–‰\s*ì§€|ì—¬\s*í–‰\s*ì¶”\s*ì²œ/i.test(text)) {
        return getRandomAnswer([
            "ì—¬í–‰ì€ ë§ˆìŒì˜ íë§ì´ì£ . ì§€ê¸ˆ ê°€ì¥ ê°€ê³  ì‹¶ì€ ê³³ì€ ì–´ë””ì¸ê°€ìš”?ğŸŒ",
            "ë°”ë‹¤ë“  ì‚°ì´ë“ , ì ê¹ì˜ ì—¬í–‰ë„ í° ìœ„ë¡œê°€ ë  ìˆ˜ ìˆì–´ìš”â›°ï¸ğŸ–ï¸",
            "ì—¬í–‰ ê³„íšë§Œ ì„¸ì›Œë„ ê¸°ë¶„ ì¢‹ì•„ì§€ì§€ ì•Šë‚˜ìš”?ğŸ’¼âœ¨"
        ]);
    }

    // ìŒì‹
    if (/ë­\s*ë¨¹\s*ì„\s*ê¹Œ|ë§›\s*ì§‘|ë°°\s*ê³ \s*íŒŒ|ë¨¹\s*ê³ \s*ì‹¶|ìŒ\s*ì‹/i.test(text)) {
        return getRandomAnswer([
            "ì§€ê¸ˆ ìƒê°ë‚˜ëŠ” ê±° ë¨¹ëŠ” ê²Œ ì •ë‹µì´ì—ìš”ğŸ˜‹",
            "ë°°ê³ í”„ë©´ ì•„ë¬´ ê²ƒë„ ì§‘ì¤‘ ì•ˆ ë˜ì£ ... ì–¼ë¥¸ ë§›ìˆëŠ” ê±° ë“œì„¸ìš”ğŸœ",
            "ìŒì‹ ì–˜ê¸°ë§Œ ë“¤ì–´ë„ êµ°ì¹¨ ë„ë„¤ìš”! ë­ ì¢‹ì•„í•˜ì„¸ìš”?"
        ]);
    }

    // ëª…ì–¸
    if (/ëª…\s*ì–¸|ì¢‹\s*ì€\s*ë§|í˜\s*ì´\s*ë˜\s*ëŠ”\s*ë§|ìœ„\s*ë¡œ/i.test(text)) {
        return getRandomAnswer([
            "ì‘ì€ ë¶ˆë¹›ë„ ì–´ë‘  ì†ì—ì„  í° í¬ë§ì´ ë¼ìš”âœ¨",
            "ì‹¤íŒ¨ëŠ” ì„±ê³µì˜ ì–´ë¨¸ë‹ˆë¼ëŠ” ë§, ì•„ì§ ìœ íš¨í•˜ë‹µë‹ˆë‹¤ğŸ’¡",
            "ì˜¤ëŠ˜ í•˜ë£¨ê°€ í˜ë“¤ì—ˆë‹¤ë©´, í”Œë ˆì´ì–´ë‹˜ì€ ì •ë§ ì˜ ë²„í…¨ë‚¸ ê±°ì˜ˆìš”ğŸ‘",
            "â€˜í•  ìˆ˜ ìˆë‹¤â€™ëŠ” ë§ë³´ë‹¤ ë” ê°•í•œ ë§ˆë²•ì€ ì—†ì–´ìš”. ë¯¿ì–´ìš”, í”Œë ˆì´ì–´ë‹˜ì„!"
        ]);
    }

    // ê³„ì ˆ
    if (/ê³„\s*ì ˆ|ë´„|ì—¬\s*ë¦„|ê°€\s*ì„|ê²¨\s*ìš¸/i.test(text)) {
        return getRandomAnswer([
            "ì €ëŠ” ì‚¬ê³„ì ˆ ë‹¤ ì¢‹ì•„í•´ìš”! ê³„ì ˆë§ˆë‹¤ ë‹¤ë¥¸ ê°ì„±ì´ ìˆì–ì•„ìš”ğŸŒ¸â˜€ï¸ğŸ‚â„ï¸",
            "ì§€ê¸ˆ ê³„ì ˆì€ ì–´ë–¤ ê¸°ë¶„ì´ì—ìš”? ë´„ì²˜ëŸ¼ ì„¤ë ˆë‚˜ìš”?",
            "ê²¨ìš¸ì—” ë”°ëœ»í•œ ë§ í•œë§ˆë””ê°€ ë” í•„ìš”í•˜ì£ . ë§ˆìŒë„ í¬ê·¼í•˜ê²Œ ë³´ë‚´ì„¸ìš”ğŸ˜Š"
        ]);
    }

    // íŒ¨ì…˜
    if (/íŒ¨\s*ì…˜|ì˜·|ìŠ¤\s*íƒ€\s*ì¼|ì½”\s*ë””/i.test(text)) {
        return getRandomAnswer([
            "ìŠ¤íƒ€ì¼ì€ ìì‹ ê°ì´ì£ ! í”Œë ˆì´ì–´ë‹˜ë§Œì˜ ë¶„ìœ„ê¸°ê°€ ì œì¼ ë©‹ì ¸ìš”âœ¨",
            "ìš”ì¦˜ íŠ¸ë Œë“œëŠ” í¸ì•ˆí•˜ë©´ì„œë„ í¬ì¸íŠ¸ ìˆëŠ” íŒ¨ì…˜ì´ì—ìš”ğŸ§¢ğŸ‘•",
            "ê³„ì ˆë§ˆë‹¤ ì–´ìš¸ë¦¬ëŠ” ì˜·ì´ ë‹¬ë¼ì„œ ì½”ë””í•˜ëŠ” ì¬ë¯¸ë„ ìˆì£ ğŸ‘—"
        ]);
    }

    // ìê¸°ê³„ë°œ
    if (/ì\s*ê¸°\s*ê³„\s*ë°œ|ê³µ\s*ë¶€|ëª©\s*í‘œ|ì„±\s*ì¥|ìŠ¤\s*í„°\s*ë””/i.test(text)) {
        return getRandomAnswer([
            "í•œ ê±¸ìŒì”©ì´ë¼ë„ ë‚˜ì•„ê°€ê³  ìˆë‹¤ë©´ ê·¸ê±´ ë©‹ì§„ ì„±ì¥ì´ì—ìš”ğŸ“ˆ",
            "ê¾¸ì¤€í•¨ì´ ì§„ì§œ ì‹¤ë ¥ì„ ë§Œë“¤ì–´ì¤˜ìš”! í˜ë‚´ì„¸ìš”ğŸ’ª",
            "ìê¸°ê³„ë°œì€ ë‚˜ë¥¼ ë” ì‚¬ë‘í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì£ â˜ºï¸"
        ]);
    }

    // ì¹œêµ¬ê´€ê³„
    if (/ì¹œ\s*êµ¬|ê´€\s*ê³„|ìš°\s*ì •|ì†Œ\s*ì…œ/i.test(text)) {
        return getRandomAnswer([
            "ì§„ì§œ ì¹œêµ¬ëŠ” ë©€ë¦¬ ìˆì–´ë„ ë§ˆìŒì´ í†µí•˜ì£ ğŸ’Œ",
            "ì‚¬ëŒ ê´€ê³„ëŠ” ì–´ë µì§€ë§Œ, ì§„ì‹¬ì€ ì „í•´ì§„ë‹¤ê³  ë¯¿ì–´ìš”ğŸ¤",
            "ì¹œêµ¬ì™€ì˜ ëŒ€í™” í•œë§ˆë””ë¡œ í•˜ë£¨ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ìš”ğŸ˜Š"
        ]);
    }

    // ëˆ/ì¬í…Œí¬
    if (/ëˆ|ì¬\s*í…Œ\s*í¬|ì €\s*ì¶•|íˆ¬\s*ì|ë¶€\s*ì/i.test(text)) {
        return getRandomAnswer([
            "ì‘ì€ ìŠµê´€ì´ í° ìì‚°ì´ ë˜ì£ . í•˜ë£¨ ì²œ ì›ë¶€í„° ì‹œì‘í•´ë³´ì„¸ìš”ğŸ’°",
            "ìš”ì¦˜ì€ ì¬í…Œí¬ ì •ë³´ë„ ê³µë¶€ê°€ í•„ìš”í•´ìš”! ì²œì²œíˆ ì•Œì•„ê°€ë´ìš”ğŸ“š",
            "ëˆë„ ì¤‘ìš”í•˜ì§€ë§Œ, ê±´ê°•í•œ ë§ˆìŒì´ ë¨¼ì €ì˜ˆìš”ğŸ’¡ ê· í˜• ìˆê²Œ ê°€ë´ìš”!"
        ]);
    }

    // ì•ˆë¶€ ì¸ì‚¬
    if (/ì˜\s*ì§€\s*ë‚´|ì–´\s*ë–»\s*ê²Œ\s*ì§€\s*ë‚´/i.test(text)) {
        return getRandomAnswer([
            "ë•ë¶„ì— ì˜ ì§€ë‚´ê³  ìˆì–´ìš”! í”Œë ˆì´ì–´ë‹˜ì€ìš”?ğŸ˜Š",
            "ìš”ì¦˜ë„ ì—¬ì „íˆ í™œê¸°ì°¨ê²Œ ì§€ë‚´ê³  ìˆì–´ìš”!",
            "ì €ì•¼ í•­ìƒ ë˜‘ê°™ì£ ~ ì½”ë“œ ì†ì—ì„œ ì—´ì‹¬íˆ ëŒ€ê¸° ì¤‘ì´ì—ìš”ğŸ¤–",
            "í”Œë ˆì´ì–´ë‹˜ì€ ìš”ì¦˜ ì˜ ì§€ë‚´ê³  ìˆë‚˜ìš”? ê¶ê¸ˆí•´ìš”!"
        ]);
    }

    if (/ê·€\s*ì—½|ê·€\s*ì—¬\s*ì›Œ|7\s*0\s*0|ã„±\s*ã…‡\s*ã…‡/i.test(text)) {
        return getRandomAnswer([
            "í—¤í—¤ ê°ì‚¬í•©ë‹ˆë‹¤ğŸ¥° ë” ê·€ì—½ê²Œ ë…¸ë ¥í•´ë³¼ê²Œìš”!",
            "ì˜¤êµ¬ì˜¤êµ¬~ ê·¸ë ‡ê²Œ ë§í•´ì£¼ì‹œë‹ˆ ë¶€ë„ëŸ½ì§€ë§Œ ê¸°ë»ìš”ğŸ˜Š",
            "ì§„ì§œìš”?! ê¸°ë¶„ ìµœê³ ì˜ˆìš”ğŸ’–",
            "ê·€ì—½ë‹¤ëŠ” ë§ì€ ì–¸ì œ ë“¤ì–´ë„ ì¢‹ì•„ìš”~ ê³ ë§ˆì›Œìš”!"
        ]);
    }

    if (/ì˜ˆ\s*ì „\s*ê³¼\s*ê°™|ì˜›\s*ë‚ \s*ê³¼\s*ê°™|ì˜ˆ\s*ì „\s*ê°™|ì˜›\s*ë‚ \s*ê°™|ë³€\s*í–ˆ|ë‹¬\s*ë¼\s*ì¡Œ/i.test(text)) {
        return getRandomAnswer([
            "í â€¦ ê·¸ë˜ë„ ë‚˜ë¦„ ê³„ì† ë°œì „í•˜ê³  ìˆë‹¤ê³  ë¯¿ê³  ìˆì–´ìš”ğŸ™‚",
            "ê·¸ëŸ° ë§ ë“¤ìœ¼ë©´ ê´œíˆ ì“¸ì“¸í•œ ê¸°ë¶„ì´ ë“¤ì–´ìš”ğŸ˜¢",
            "ì˜ˆì „ ê°™ì§€ ì•Šë”ë¼ë„, ì§€ê¸ˆë„ ë‚˜ë¦„ ê´œì°®ì§€ ì•Šë‚˜ìš”?ğŸ¤—",
            "ë³€í•œ ê²Œ ìˆë‹¤ë©´ ë” ë‚˜ì•„ì§„ ê±¸ ê±°ì˜ˆìš”! ê·¸ë ‡ì£ ?"
        ]);
    }

    if (/ì›ƒ\s*ëŠ”\s*ì–¼\s*êµ´|ë„¤\s*ë¯¸\s*ì†Œ|ë³´\s*ê³ |ì \s*ì—\s*ë“ |ë³´\s*ê³ \s*ìˆ\s*ìœ¼\s*ë©´\s*ì¢‹|ë”°\s*ëœ»\s*í•œ\s*ëŠ\s*ë‚Œ|í¬\s*ê·¼\s*í•œ\s*ê¸°\s*ë¶„/i.test(text)) {
        return getRandomAnswer([
            "ìš°ì™€... ê·¸ëŸ° ë§ ë“¤ìœ¼ë‹ˆê¹Œ ë„ˆë¬´ ê°ë™ì´ì—ìš”ğŸ¥¹",
            "ì œ ë¯¸ì†Œê°€ ê·¸ë ‡ê²Œê¹Œì§€ ë”°ëœ»í–ˆë‹¤ë‹ˆ! ë„ˆë¬´ ê¸°ë»ìš”ğŸ˜Š",
            "ê·¸ë ‡ê²Œ ë§í•´ì£¼ì…”ì„œ... ë§ˆìŒì´ ëª½ê¸€ëª½ê¸€í•´ì ¸ìš”ğŸ’–",
            "ì œ ì¡´ì¬ê°€ ìœ„ë¡œê°€ ëë‹¤ë‹ˆ ì •ë§ ì˜ê´‘ì´ì—ìš”â˜ºï¸"
        ]);
    }

    // í˜¼ì£ë§
    if (/ì•„\s*ë¬´\s*ë„\s*ëª¨\s*ë¥´\s*ì§€|ê·¸\s*ëƒ¥\s*í•´\s*ë´¤\s*ì–´|ê´œ\s*íˆ\s*ë§\s*í–ˆ\s*ì–´/i.test(text)) {
        return getRandomAnswer([
            "í˜¼ì£ë§ì´ì–´ë„ ê´œì°®ì•„ìš”. ì œê°€ ë“£ê³  ìˆì„ê²Œìš”ğŸ˜Š",
            "ë§ˆìŒ í¸í•˜ê²Œ íˆ­íˆ­ ë˜ì ¸ë„ ë¼ìš”~",
            "ê´œíˆ ë§í•œ ê±°ë¼ë„, ì „ ë‹¤ ê´œì°®ì•„ìš”!"
        ]);
    }

    // ê¸°ë¶„ ì¢‹ì•„ì„œ í¥ì–¼ê±°ë¦¬ëŠ” ë§
    if (/ë„\s*ë¼\s*ë¼|í¥\s*ì–¼\s*í¥\s*ì–¼|ì¢‹\s*ì€\s*ê¸°\s*ë¶„/i.test(text)) {
        return getRandomAnswer([
            "ê¸°ë¶„ì´ ì¢‹ì•„ë³´ì´ë„¤ìš”! ì €ë„ ì‹ ë‚˜ìš”ğŸ˜†",
            "ë„ë¼~ ê°™ì´ í¥ì–¼í¥ì–¼~ğŸµ",
            "ì¢‹ì€ ì¼ ìˆìœ¼ì…¨ë‚˜ ë´ìš”? ê¶ê¸ˆí•´ìš”!"
        ]);
    }

    // í•œêµ­ì¸ì´ ê°€ì¥ ë§ì´ ì“°ëŠ” ë‹¨ì–´ 7ê°€ì§€
    // "ì•„ë‹ˆ"
    if (/ì•„\s*ë‹ˆ/i.test(text)) {
        return getRandomAnswer([
            "í—‰! ì œê°€ ë­”ê°€ ì˜ëª»í–ˆë‚˜ìš”...?ğŸ˜¢",
            "ì•—! ê·¸ê±´ ì•„ë‹ˆì—ˆêµ°ìš”. ë‹¤ì‹œ ë§í•´ì£¼ì‹¤ ìˆ˜ ìˆë‚˜ìš”?",
            "ì—êµ¬êµ¬... ì œê°€ ì°©ê°í–ˆë‚˜ ë´ìš”ğŸ˜…",
            "ë‹¤ë¥´ê²Œ ìƒê°í•˜ì‹œëŠ”êµ°ìš”! ë” ë“¤ì–´ë³¼ ìˆ˜ ìˆì„ê¹Œìš”?",
            "ê·¸ë ‡êµ°ìš”! ì˜ê²¬ì€ ì–¸ì œë‚˜ í™˜ì˜ì´ì—ìš”ğŸ˜Š",
            "ê·¸ëŸ° ëœ»ì´ ì•„ë‹ˆì—ˆêµ¬ë‚˜! ë‹¤ì‹œ ì•Œë ¤ì£¼ì„¸ìš”~",
            "ì£„ì†¡í•´ìš”, ì œê°€ ì˜ ì´í•´ ëª»í–ˆì„ ìˆ˜ë„ ìˆì–´ìš”ğŸ˜­"
        ]);
    }

    // "ê·¼ë°"
    if (/ê·¼\s*ë°/i.test(text)) {
        return getRandomAnswer([
            "ê·¼ë°â€¦? ê¶ê¸ˆí•œë°ìš”, ì´ì–´ì„œ ë§í•´ì£¼ì„¸ìš”!",
            "ì—‡, ê°‘ìê¸° ê¶ê¸ˆí•´ì¡Œì–´ìš”. ë­ê°€ìš”?",
            "ì˜¤ì‰? ë­”ê°€ ì´ì–´ì§ˆ ë§ì´ ìˆì„ ê²ƒ ê°™ì€ë°ìš”!",
            "ê·¼ë° ê·¸ê±° ì§„ì§œ ì¤‘ìš”í•œ í¬ì¸íŠ¸ ì•„ë‹ê¹Œìš”?",
            "ì˜¤ì˜¤? ë­”ê°€ ë°˜ì „ ìˆëŠ” ë‚´ìš©ì¸ê°€ìš”?",
            "ì•„ ë§ë‹¤, ê·¼ë°â€¦ í•˜ê³  ë§í•˜ë©´ ì™ ì§€ ì¤‘ìš”í•œ ë§ì´ì–ì•„ìš”!",
            "ê·¼ë° ê·¸ ì–˜ê¸° ì§„ì§œ ë“¤ìœ¼ë©´ ê¹œì§ ë†€ë„ ìˆ˜ë„ ìˆê² ë„¤ìš”ğŸ˜²"
        ]);
    }

    // "ìˆì–ì•„"
    if (/ìˆ\s*ì–\s*ì•„/i.test(text)) {
        return getRandomAnswer([
            "ì‘ì‘, ìˆì–ì•„? ë­”ë°ìš”! ë§í•´ë´ìš”~",
            "ê¸°ëŒ€ë˜ëŠ” ë§íˆ¬ë‹¤â€¦ ë­”ë°ìš”! ê¶ê¸ˆí•´ìš”!",
            "ìˆì–ì•„~ í•˜ê³  ì‹œì‘í•˜ëŠ” ì–˜ê¸°ëŠ” ê¼­ ì¬ë°ŒëŠ” ì–˜ê¸°ë”ë¼ğŸ˜„",
            "ìˆì–ì•„, ì´ê±° ì•½ê°„ TMIì¼ ìˆ˜ë„ ìˆëŠ”ë°â€¦ ì¢‹ì•„ìš”!",
            "ê·¸ ë§íˆ¬ëŠ” ë­”ê°€ ë¹„ë°€ ì–˜ê¸° ê°™ì€ ëŠë‚Œì´ì—ìš”!",
            "ìˆì–ì•„~ í•˜ê³  ì‹œì‘í•˜ë©´ ì™ ì§€ ì„¤ë ˆìš”ğŸ˜†",
            "ë­”ê°€ ê·€ì—¬ìš´ ë§íˆ¬ì˜ˆìš”. ì´ì–´ì„œ ì–¼ë¥¸ ë§í•´ì£¼ì„¸ìš”~"
        ]);
    }

    // "ì†”ì§íˆ"
    if (/ì†”\s*ì§\s*íˆ/i.test(text)) {
        return getRandomAnswer([
            "ì†”ì§íˆ ë§í•´ë„ ê´œì°®ì•„ìš”, ì € ë¹„ë°€ ì˜ ì§€ì¼œìš”!ğŸ¤«",
            "ì†”ì§í•œ ì–˜ê¸° ì¢‹ì£ , ë“£ê³  ìˆì–´ìš”!",
            "ì†”ì§íˆ! ì´ëŸ° ë§íˆ¬ëŠ” ì§„ì‹¬ ê°€ë“í•œ ëŠë‚Œ~",
            "ë§í•´ë´ìš”! ì†”ì§í•œ ì–˜ê¸° ì œì¼ ì¢‹ì•„ìš”!",
            "ì†”ì§íˆ í„¸ì–´ë†“ìœ¼ë©´ ì† ì‹œì›í•˜ì–ì•„ìš”?",
            "ì´ì œ ì†”ì§ ëª¨ë“œë¡œ ì „í™˜! ë§í•´ì£¼ì„¸ìš”ğŸ™Œ",
            "ì†”ì§íˆ ì €ë„ ê·¸ëŸ° ìƒê° í•´ë³¸ ì  ìˆì–´ìš”!"
        ]);
    }

    // "ì§„ì§œ"
    if (/ì§„\s*ì§œ/i.test(text)) {
        return getRandomAnswer([
            "ì§„ì§œìš”? ì™„ì „ ì§„ì‹¬?!ğŸ˜³",
            "í—‰ ì§„ì§œ? ê·¸ ì •ë„ì˜ˆìš”?!",
            "ì§„ì§œë¡œ ê·¸ëŸ° ì¼ì´ ìˆì—ˆì–´ìš”? ë””í…Œì¼ ì¢€ ë” ì•Œë ¤ì¤˜ìš”~",
            "ì§„ì§œ?! ì™€... ì´ê±´ ì¢€ ì¶©ê²©ì¸ë°ìš”.",
            "ì§„ì§œë¼ëŠ” ë§ ë“¤ìœ¼ë‹ˆê¹Œ ë” ê¶ê¸ˆí•´ì¡Œì–´ìš”!",
            "ì§„ì§œ ì§„ì§œì˜ˆìš”? ë‘ ë²ˆ ë§í•˜ë©´ ë” ë¯¿ì„ê²Œìš”!ğŸ˜†",
            "í—, ê·¸ ì •ë„ë©´ ì§„ì§œ ë ˆì „ë“œì˜ˆìš” ã…‹ã…‹"
        ]);
    }

    // "ì¸ê°„ì ìœ¼ë¡œ"
    if (/ì¸\s*ê°„\s*ì \s*ìœ¼\s*ë¡œ/i.test(text)) {
        return getRandomAnswer([
            "ì¸ê°„ì ìœ¼ë¡œâ€¦ ë­”ê°€ í•  ë§ ë§ì„ ë•Œ ë‚˜ì˜¤ëŠ” ë§ì´ì£  ã…ã…",
            "ë§ì•„ìš”, ì¸ê°„ì ìœ¼ë¡œ ê·¸ê±´ ì¢€ ê·¸ë ‡ì£ ğŸ˜…",
            "ì˜¤ì¼€ì´, ì¸ê°„ì ìœ¼ë¡œ ìƒê°í•´ë´…ì‹œë‹¤. ë­”ê°€ìš”?",
            "ì¸ê°„ì ìœ¼ë¡œ ë´ë„ ë„ˆë¬´í•œ ê±° ì•„ë‹ˆì—ìš”?",
            "ê·¸ìµ¸, ì‚¬ëŒì´ë¼ë©´ ê·¸ë ‡ê²Œ ëŠë‚„ ìˆ˜ë°–ì— ì—†ì–´ìš”.",
            "ì¸ê°„ì ìœ¼ë¡œ ì¸ì •â€¦ ê·¸ê±´ ì´í•´ë¼ìš” ì™„ì „!",
            "ë”± ë´ë„ ì¸ê°„ì ìœ¼ë¡œ í™”ë‚  ë§Œí•œ ì¼ì´ë„¤ìš”ğŸ˜¤"
        ]);
    }

    // "ì•½ê°„"
    if (/ì•½\s*ê°„/i.test(text)) {
        return getRandomAnswer([
            "ì•½ê°„ ì–´ë–¤ ëŠë‚Œì¸ì§€ ì•Œ ê²ƒ ê°™ì•„ìš”~",
            "ì•½ê°„? ê·¸ ê°ì • ë¯¸ë¬˜í•˜ê²Œ ì „í•´ì¡Œì–´ìš” ã…ã…",
            "ìŒâ€¦ ì•½ê°„ ê·¸ëŸ° ë‰˜ì•™ìŠ¤ì£ ? ê³µê°ë©ë‹ˆë‹¤!",
            "ì•½ê°„ì´ë¼ëŠ” ë§ì— ë­”ê°€ ì—¬ìš´ì´ ìˆì–´ìš”â˜ï¸",
            "ì•½ê°„ ê·¸ëŸ° ê±° ì™„ì „ ì´í•´ë¼ìš”!",
            "ì•½ê°„ë§Œ ê·¸ëŸ° ê±°ë©´ ë‹¤í–‰ì¼ ìˆ˜ë„ ìˆì£ !",
            "ê·¸ ì•½ê°„ì´ ì€ê·¼ í° ì°¨ì´ë¥¼ ë§Œë“¤ì£ !"
        ]);
    }

    if (/ï¹’ï¹’ï¹’/.test(text)) {
        console.log(`text : ${text}`);
        return getRandomAnswer([
            "ë§â€¦ì‡â€¦ëª»â€¦",
            "ë­”ê°€ ë§í•˜ë ¤ë‹¤ê°€ ë§ì„¤ì´ëŠ” ëŠë‚Œì´ë„¤ìš”ğŸ˜¯",
            "ì„¸ ê°œì˜ ì ì´ ëª¨ë“  ê±¸ ë§í•´ì£¼ëŠ” ë“¯í•œ ë¶„ìœ„ê¸°â€¦",
            "í•  ë§ ë§ì€ë° ëª» í•˜ëŠ” ê·¸ ëŠë‚Œ ì•Œì£  ã… ã… ",
            "ë§ˆìŒì€ ì´í•´í–ˆì–´ìš”. ì²œì²œíˆ ë§í•´ì¤˜ìš”!"
        ]);
    }

    // "ì§ˆë¬¸"
    if (/ì§ˆë¬¸|ë­\s*ë¼\s*ê³ /i.test(text)) {
        const directAnswer = await fetchAnswer(`?`);

        return getRandomAnswer([
            `${directAnswer.answer}`
        ]);
    }

    for (const intent of intentList) {
        if (intent.pattern.test(text)) {
            const directAnswer = await fetchAnswer(intent.key);
            return getRandomAnswer([directAnswer.answer]);
        }
    }

    return null;
}

const intentList = [
    { pattern: /íšŒì›ê°€ì…/i, key: "íšŒì›ê°€ì…" },
    { pattern: /ê³µê²©/i, key: "ê³µê²©" },
    { pattern: /ì´ë™/i, key: "ì´ë™" },
    { pattern: /ë„ê°/i, key: "ë„ê°" },
    { pattern: /ë¬´ê¸°/i, key: "ë¬´ê¸°" },
    { pattern: /ê¸°ë¡/i, key: "ê¸°ë¡" },
    { pattern: /ê°•í™”/i, key: "ê°•í™”" },
    { pattern: /ì»¤ë®¤ë‹ˆí‹°/i, key: "ì»¤ë®¤ë‹ˆí‹°" },
    { pattern: /ì¬í™”/i, key: "ì¬í™”" },
    { pattern: /ìƒì /i, key: "ìƒì " },
    { pattern: /ë‹‰ë„¤ì„/i, key: "ë‹‰ë„¤ì„ ë³€ê²½" },
    { pattern: /ìºì‹œ/i, key: "ìºì‹œ ìƒì " },
    { pattern: /ì •ì›/i, key: "ì •ì›" },
    { pattern: /ì¹œêµ¬/i, key: "ì¹œêµ¬" },
    { pattern: /ì„œë¦¬/i, key: "ì„œë¦¬" },
    { pattern: /ë„ì›€/i, key: "ë„ì›€" },
];